<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>practice</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles/index.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Index</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./homework.html"> 
<span class="menu-text">Homework</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./labs.html"> 
<span class="menu-text">Labs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./practice.html" aria-current="page"> 
<span class="menu-text">Practice</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/yunlong652/YunlongWei_Homework/blob/main/code-basics.ipynb"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    <div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="labs/Practice/Practice3-DouBan-top250-visualizations-preview.html"><i class="bi bi-journal-code"></i>定义请求的 URL 和 headers</a></li><li><a href="labs/Practice/Practice1-Climate-change-preview.html"><i class="bi bi-journal-code"></i>Create a variable that has years 1951 to 1980, and months Jan to Dec (inclusive)</a></li><li><a href="labs/Practice/Practice3-scrape-imdb-movie-rating-and-details-preview.html"><i class="bi bi-journal-code"></i>Downloading imdb top 250 movie's data</a></li><li><a href="labs/Practice/Practice3-Extracting-data-preview.html"><i class="bi bi-journal-code"></i>Get the data from the ONS API:</a></li><li><a href="labs/Practice/Practice2-Collecting-and-analysing-data-from-experiments-preview.html"><i class="bi bi-journal-code"></i>Original dataframe</a></li><li><a href="labs/Practice/Practice2-Recreate-the-matplotlib-plots-using-letsplot-library-preview.html"><i class="bi bi-journal-code"></i>Practice2-Recreate-the-matplotlib-plots-using-letsplot-library.ipynb</a></li><li><a href="labs/Practice/Practice4-IMDb-and-Douban-top-250-movie-datasets-preview.html"><i class="bi bi-journal-code"></i>Regular expressions to extract information</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="practice1-climate-change" class="level1">
<h1>Practice1-Climate-change</h1>
<div class="quarto-embed-nb-cell">
<div id="cell-0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>pip install pandas matplotlib numpy lets_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: pandas in c:\users\hp\anaconda3\lib\site-packages (2.2.2)
Requirement already satisfied: matplotlib in c:\users\hp\anaconda3\lib\site-packages (3.9.2)
Requirement already satisfied: numpy in c:\users\hp\anaconda3\lib\site-packages (1.26.4)
Collecting lets_plot
  Using cached lets_plot-4.5.1-cp312-cp312-win_amd64.whl.metadata (11 kB)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in c:\users\hp\anaconda3\lib\site-packages (from pandas) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in c:\users\hp\anaconda3\lib\site-packages (from pandas) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in c:\users\hp\anaconda3\lib\site-packages (from pandas) (2023.3)
Requirement already satisfied: contourpy&gt;=1.0.1 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib) (1.2.0)
Requirement already satisfied: cycler&gt;=0.10 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib) (0.11.0)
Requirement already satisfied: fonttools&gt;=4.22.0 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib) (4.51.0)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib) (1.4.4)
Requirement already satisfied: packaging&gt;=20.0 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib) (24.1)
Requirement already satisfied: pillow&gt;=8 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib) (10.4.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib) (3.1.2)
Collecting pypng (from lets_plot)
  Using cached pypng-0.20220715.0-py3-none-any.whl.metadata (13 kB)
Collecting palettable (from lets_plot)
  Using cached palettable-3.3.3-py2.py3-none-any.whl.metadata (3.3 kB)
Requirement already satisfied: six&gt;=1.5 in c:\users\hp\anaconda3\lib\site-packages (from python-dateutil&gt;=2.8.2-&gt;pandas) (1.16.0)
Using cached lets_plot-4.5.1-cp312-cp312-win_amd64.whl (3.1 MB)
Using cached palettable-3.3.3-py2.py3-none-any.whl (332 kB)
Using cached pypng-0.20220715.0-py3-none-any.whl (58 kB)
Installing collected packages: pypng, palettable, lets_plot
Successfully installed lets_plot-4.5.1 palettable-3.3.3 pypng-0.20220715.0
Note: you may need to restart the kernel to use updated packages.</code></pre>
</div>
</div>
<div id="cell-1" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> mpl</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lets_plot <span class="im">import</span> <span class="op">*</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>LetsPlot.setup_html(no_js<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>plt.style.use(</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/aeturrell/core_python/main/plot_style.txt"</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-2" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://data.giss.nasa.gov/gistemp/tabledata_v4/NH.Ts+dSST.csv"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    skiprows<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    na_values<span class="op">=</span><span class="st">"***"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-3" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span><span class="er">Why</span> have researchers chosen this particular measure over other measures (such <span class="im">as</span> absolute temperature)?</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Temperature anomalies indicate how much warmer or colder it is than normal for a particular place and time. For the GISS analysis, normal always means the average over the 30-year period 1951-1980 for that place and time of year. This base period is specific to GISS, not universal. But note that trends do not depend on the choice of the base period: If the absolute temperature at a specific location is 2 degrees higher than a year ago, so is the corresponding temperature anomaly, no matter what base period is selected, since the normal temperature used as base point (which is subtracted from the absolute temperature to get the anomaly) is the same for both years.</p>
<p>Note that regional mean anomalies (in particular global anomalies) are not computed from the current absolute mean and the 1951-80 mean for that region, but from station temperature anomalies. Finding absolute regional means encounters significant difficulties that create large uncertainties. This is why the GISS analysis deals with anomalies rather than absolute temperatures. For a more detailed discussion of that topic, please see “The Elusive Absolute Temperature”.</p>
<div id="cell-5" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Jan</th>
<th data-quarto-table-cell-role="th">Feb</th>
<th data-quarto-table-cell-role="th">Mar</th>
<th data-quarto-table-cell-role="th">Apr</th>
<th data-quarto-table-cell-role="th">May</th>
<th data-quarto-table-cell-role="th">Jun</th>
<th data-quarto-table-cell-role="th">Jul</th>
<th data-quarto-table-cell-role="th">Aug</th>
<th data-quarto-table-cell-role="th">Sep</th>
<th data-quarto-table-cell-role="th">Oct</th>
<th data-quarto-table-cell-role="th">Nov</th>
<th data-quarto-table-cell-role="th">Dec</th>
<th data-quarto-table-cell-role="th">J-D</th>
<th data-quarto-table-cell-role="th">D-N</th>
<th data-quarto-table-cell-role="th">DJF</th>
<th data-quarto-table-cell-role="th">MAM</th>
<th data-quarto-table-cell-role="th">JJA</th>
<th data-quarto-table-cell-role="th">SON</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1880</td>
<td>-0.39</td>
<td>-0.54</td>
<td>-0.24</td>
<td>-0.31</td>
<td>-0.06</td>
<td>-0.18</td>
<td>-0.22</td>
<td>-0.26</td>
<td>-0.25</td>
<td>-0.31</td>
<td>-0.44</td>
<td>-0.43</td>
<td>-0.30</td>
<td>NaN</td>
<td>NaN</td>
<td>-0.20</td>
<td>-0.22</td>
<td>-0.33</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1881</td>
<td>-0.31</td>
<td>-0.25</td>
<td>-0.06</td>
<td>-0.02</td>
<td>0.05</td>
<td>-0.34</td>
<td>0.09</td>
<td>-0.06</td>
<td>-0.29</td>
<td>-0.45</td>
<td>-0.37</td>
<td>-0.23</td>
<td>-0.19</td>
<td>-0.20</td>
<td>-0.33</td>
<td>-0.01</td>
<td>-0.10</td>
<td>-0.37</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1882</td>
<td>0.26</td>
<td>0.21</td>
<td>0.02</td>
<td>-0.30</td>
<td>-0.23</td>
<td>-0.29</td>
<td>-0.28</td>
<td>-0.15</td>
<td>-0.25</td>
<td>-0.52</td>
<td>-0.34</td>
<td>-0.69</td>
<td>-0.21</td>
<td>-0.18</td>
<td>0.08</td>
<td>-0.17</td>
<td>-0.24</td>
<td>-0.37</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1883</td>
<td>-0.58</td>
<td>-0.66</td>
<td>-0.15</td>
<td>-0.30</td>
<td>-0.26</td>
<td>-0.12</td>
<td>-0.06</td>
<td>-0.23</td>
<td>-0.34</td>
<td>-0.17</td>
<td>-0.45</td>
<td>-0.15</td>
<td>-0.29</td>
<td>-0.33</td>
<td>-0.64</td>
<td>-0.24</td>
<td>-0.14</td>
<td>-0.32</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1884</td>
<td>-0.16</td>
<td>-0.11</td>
<td>-0.64</td>
<td>-0.59</td>
<td>-0.36</td>
<td>-0.42</td>
<td>-0.41</td>
<td>-0.52</td>
<td>-0.45</td>
<td>-0.45</td>
<td>-0.58</td>
<td>-0.47</td>
<td>-0.43</td>
<td>-0.40</td>
<td>-0.14</td>
<td>-0.53</td>
<td>-0.45</td>
<td>-0.50</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-6" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 145 entries, 0 to 144
Data columns (total 19 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   Year    145 non-null    int64  
 1   Jan     145 non-null    float64
 2   Feb     145 non-null    float64
 3   Mar     145 non-null    float64
 4   Apr     145 non-null    float64
 5   May     145 non-null    float64
 6   Jun     145 non-null    float64
 7   Jul     145 non-null    float64
 8   Aug     145 non-null    float64
 9   Sep     145 non-null    float64
 10  Oct     144 non-null    float64
 11  Nov     144 non-null    float64
 12  Dec     144 non-null    float64
 13  J-D     144 non-null    float64
 14  D-N     143 non-null    float64
 15  DJF     144 non-null    float64
 16  MAM     145 non-null    float64
 17  JJA     145 non-null    float64
 18  SON     144 non-null    float64
dtypes: float64(18), int64(1)
memory usage: 21.7 KB</code></pre>
</div>
</div>
<div id="cell-7" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.set_index(<span class="st">"Year"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Jan</th>
<th data-quarto-table-cell-role="th">Feb</th>
<th data-quarto-table-cell-role="th">Mar</th>
<th data-quarto-table-cell-role="th">Apr</th>
<th data-quarto-table-cell-role="th">May</th>
<th data-quarto-table-cell-role="th">Jun</th>
<th data-quarto-table-cell-role="th">Jul</th>
<th data-quarto-table-cell-role="th">Aug</th>
<th data-quarto-table-cell-role="th">Sep</th>
<th data-quarto-table-cell-role="th">Oct</th>
<th data-quarto-table-cell-role="th">Nov</th>
<th data-quarto-table-cell-role="th">Dec</th>
<th data-quarto-table-cell-role="th">J-D</th>
<th data-quarto-table-cell-role="th">D-N</th>
<th data-quarto-table-cell-role="th">DJF</th>
<th data-quarto-table-cell-role="th">MAM</th>
<th data-quarto-table-cell-role="th">JJA</th>
<th data-quarto-table-cell-role="th">SON</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1880</td>
<td>-0.39</td>
<td>-0.54</td>
<td>-0.24</td>
<td>-0.31</td>
<td>-0.06</td>
<td>-0.18</td>
<td>-0.22</td>
<td>-0.26</td>
<td>-0.25</td>
<td>-0.31</td>
<td>-0.44</td>
<td>-0.43</td>
<td>-0.30</td>
<td>NaN</td>
<td>NaN</td>
<td>-0.20</td>
<td>-0.22</td>
<td>-0.33</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1881</td>
<td>-0.31</td>
<td>-0.25</td>
<td>-0.06</td>
<td>-0.02</td>
<td>0.05</td>
<td>-0.34</td>
<td>0.09</td>
<td>-0.06</td>
<td>-0.29</td>
<td>-0.45</td>
<td>-0.37</td>
<td>-0.23</td>
<td>-0.19</td>
<td>-0.20</td>
<td>-0.33</td>
<td>-0.01</td>
<td>-0.10</td>
<td>-0.37</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1882</td>
<td>0.26</td>
<td>0.21</td>
<td>0.02</td>
<td>-0.30</td>
<td>-0.23</td>
<td>-0.29</td>
<td>-0.28</td>
<td>-0.15</td>
<td>-0.25</td>
<td>-0.52</td>
<td>-0.34</td>
<td>-0.69</td>
<td>-0.21</td>
<td>-0.18</td>
<td>0.08</td>
<td>-0.17</td>
<td>-0.24</td>
<td>-0.37</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1883</td>
<td>-0.58</td>
<td>-0.66</td>
<td>-0.15</td>
<td>-0.30</td>
<td>-0.26</td>
<td>-0.12</td>
<td>-0.06</td>
<td>-0.23</td>
<td>-0.34</td>
<td>-0.17</td>
<td>-0.45</td>
<td>-0.15</td>
<td>-0.29</td>
<td>-0.33</td>
<td>-0.64</td>
<td>-0.24</td>
<td>-0.14</td>
<td>-0.32</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1884</td>
<td>-0.16</td>
<td>-0.11</td>
<td>-0.64</td>
<td>-0.59</td>
<td>-0.36</td>
<td>-0.42</td>
<td>-0.41</td>
<td>-0.52</td>
<td>-0.45</td>
<td>-0.45</td>
<td>-0.58</td>
<td>-0.47</td>
<td>-0.43</td>
<td>-0.40</td>
<td>-0.14</td>
<td>-0.53</td>
<td>-0.45</td>
<td>-0.50</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-8" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df.tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Jan</th>
<th data-quarto-table-cell-role="th">Feb</th>
<th data-quarto-table-cell-role="th">Mar</th>
<th data-quarto-table-cell-role="th">Apr</th>
<th data-quarto-table-cell-role="th">May</th>
<th data-quarto-table-cell-role="th">Jun</th>
<th data-quarto-table-cell-role="th">Jul</th>
<th data-quarto-table-cell-role="th">Aug</th>
<th data-quarto-table-cell-role="th">Sep</th>
<th data-quarto-table-cell-role="th">Oct</th>
<th data-quarto-table-cell-role="th">Nov</th>
<th data-quarto-table-cell-role="th">Dec</th>
<th data-quarto-table-cell-role="th">J-D</th>
<th data-quarto-table-cell-role="th">D-N</th>
<th data-quarto-table-cell-role="th">DJF</th>
<th data-quarto-table-cell-role="th">MAM</th>
<th data-quarto-table-cell-role="th">JJA</th>
<th data-quarto-table-cell-role="th">SON</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020</td>
<td>1.58</td>
<td>1.69</td>
<td>1.66</td>
<td>1.39</td>
<td>1.26</td>
<td>1.14</td>
<td>1.10</td>
<td>1.12</td>
<td>1.19</td>
<td>1.20</td>
<td>1.58</td>
<td>1.18</td>
<td>1.34</td>
<td>1.36</td>
<td>1.56</td>
<td>1.44</td>
<td>1.12</td>
<td>1.32</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2021</td>
<td>1.25</td>
<td>0.95</td>
<td>1.20</td>
<td>1.12</td>
<td>1.04</td>
<td>1.20</td>
<td>1.07</td>
<td>1.02</td>
<td>1.04</td>
<td>1.29</td>
<td>1.29</td>
<td>1.16</td>
<td>1.14</td>
<td>1.14</td>
<td>1.13</td>
<td>1.12</td>
<td>1.10</td>
<td>1.21</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2022</td>
<td>1.24</td>
<td>1.16</td>
<td>1.41</td>
<td>1.08</td>
<td>1.02</td>
<td>1.12</td>
<td>1.06</td>
<td>1.16</td>
<td>1.14</td>
<td>1.31</td>
<td>1.09</td>
<td>1.06</td>
<td>1.15</td>
<td>1.16</td>
<td>1.19</td>
<td>1.17</td>
<td>1.11</td>
<td>1.18</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023</td>
<td>1.29</td>
<td>1.29</td>
<td>1.63</td>
<td>1.01</td>
<td>1.12</td>
<td>1.19</td>
<td>1.44</td>
<td>1.57</td>
<td>1.67</td>
<td>1.88</td>
<td>1.97</td>
<td>1.85</td>
<td>1.49</td>
<td>1.43</td>
<td>1.21</td>
<td>1.26</td>
<td>1.40</td>
<td>1.84</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024</td>
<td>1.66</td>
<td>1.93</td>
<td>1.77</td>
<td>1.79</td>
<td>1.44</td>
<td>1.54</td>
<td>1.42</td>
<td>1.42</td>
<td>1.57</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.81</td>
<td>1.67</td>
<td>1.46</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Jan"</span>].plot(ax<span class="op">=</span>ax)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"y label"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"x label"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"title"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice1-Climate-change-cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>ax.plot(df.index, df[<span class="st">"Jan"</span>])</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"y label"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"x label"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"title"</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice1-Climate-change-cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-11" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>month <span class="op">=</span> <span class="st">"Jan"</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"orange"</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>ax.annotate(<span class="st">"1951—1980 average"</span>, xy<span class="op">=</span>(<span class="fl">0.66</span>, <span class="op">-</span><span class="fl">0.2</span>), xycoords<span class="op">=</span>(<span class="st">"figure fraction"</span>, <span class="st">"data"</span>))</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>df[month].plot(ax<span class="op">=</span>ax)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>ax.set_title(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"Average temperature anomaly in </span><span class="sc">{</span>month<span class="sc">}</span><span class="ss"> </span><span class="ch">\n</span><span class="ss"> in the northern hemisphere (1880—</span><span class="sc">{</span>df<span class="sc">.</span>index<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">)"</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Annual temperature anomalies"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice1-Climate-change-cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-12" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>month <span class="op">=</span> <span class="st">"J-D"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"orange"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>ax.annotate(<span class="st">"1951—1980 average"</span>, xy<span class="op">=</span>(<span class="fl">0.68</span>, <span class="op">-</span><span class="fl">0.2</span>), xycoords<span class="op">=</span>(<span class="st">"figure fraction"</span>, <span class="st">"data"</span>))</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>df[month].plot(ax<span class="op">=</span>ax)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>ax.set_title(</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"Average annual temperature anomaly in </span><span class="ch">\n</span><span class="ss"> in the northern hemisphere (1880—</span><span class="sc">{</span>df<span class="sc">.</span>index<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">)"</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Annual temperature anomalies"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice1-Climate-change-cell-13-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-13" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Period"</span>] <span class="op">=</span> pd.cut(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    df.index,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span>[<span class="dv">1921</span>, <span class="dv">1950</span>, <span class="dv">1980</span>, <span class="dv">2010</span>],</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    labels<span class="op">=</span>[<span class="st">"1921—1950"</span>, <span class="st">"1951—1980"</span>, <span class="st">"1981—2010"</span>],</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    ordered<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Period"</span>].tail(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>Year
2005    1981—2010
2006    1981—2010
2007    1981—2010
2008    1981—2010
2009    1981—2010
2010    1981—2010
2011          NaN
2012          NaN
2013          NaN
2014          NaN
2015          NaN
2016          NaN
2017          NaN
2018          NaN
2019          NaN
2020          NaN
2021          NaN
2022          NaN
2023          NaN
2024          NaN
Name: Period, dtype: category
Categories (3, object): ['1921—1950' &lt; '1951—1980' &lt; '1981—2010']</code></pre>
</div>
</div>
<div id="cell-14" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>list_of_months <span class="op">=</span> [<span class="st">"Jun"</span>, <span class="st">"Jul"</span>, <span class="st">"Aug"</span>]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>df[list_of_months].stack().head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>Year     
1880  Jun   -0.18
      Jul   -0.22
      Aug   -0.26
1881  Jun   -0.34
      Jul    0.09
dtype: float64</code></pre>
</div>
</div>
<div id="cell-15" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(ncols<span class="op">=</span><span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">4</span>), sharex<span class="op">=</span><span class="va">True</span>, sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax, period <span class="kw">in</span> <span class="bu">zip</span>(axes, df[<span class="st">"Period"</span>].dropna().unique()):</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    df.loc[df[<span class="st">"Period"</span>] <span class="op">==</span> period, list_of_months].stack().hist(ax<span class="op">=</span>ax)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    ax.set_title(period)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">"Histogram of temperature anomalies"</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">"Summer temperature distribution"</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice1-Climate-change-cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-16" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a variable that has years 1951 to 1980, and months Jan to Dec (inclusive)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>temp_all_months <span class="op">=</span> df.loc[(df.index <span class="op">&gt;=</span> <span class="dv">1951</span>) <span class="op">&amp;</span> (df.index <span class="op">&lt;=</span> <span class="dv">1980</span>), <span class="st">"Jan"</span>:<span class="st">"Dec"</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Put all the data in stacked format and give the new columns sensible names</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>temp_all_months <span class="op">=</span> (</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    temp_all_months.stack()</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">"level_1"</span>: <span class="st">"month"</span>, <span class="dv">0</span>: <span class="st">"values"</span>})</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a look at this data:</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>temp_all_months</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1951</td>
<td>Jan</td>
<td>-0.36</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1951</td>
<td>Feb</td>
<td>-0.51</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1951</td>
<td>Mar</td>
<td>-0.19</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1951</td>
<td>Apr</td>
<td>0.07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1951</td>
<td>May</td>
<td>0.17</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">355</td>
<td>1980</td>
<td>Aug</td>
<td>0.09</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">356</td>
<td>1980</td>
<td>Sep</td>
<td>0.10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">357</td>
<td>1980</td>
<td>Oct</td>
<td>0.12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">358</td>
<td>1980</td>
<td>Nov</td>
<td>0.20</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">359</td>
<td>1980</td>
<td>Dec</td>
<td>0.09</td>
</tr>
</tbody>
</table>

<p>360 rows × 3 columns</p>
</div>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>quantiles <span class="op">=</span> [<span class="fl">0.3</span>, <span class="fl">0.7</span>]</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>list_of_percentiles <span class="op">=</span> np.quantile(temp_all_months[<span class="st">"values"</span>], q<span class="op">=</span>quantiles)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The cold threshold of </span><span class="sc">{</span>quantiles[<span class="dv">0</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">}</span><span class="ss">% is </span><span class="sc">{</span>list_of_percentiles[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The hot threshold of </span><span class="sc">{</span>quantiles[<span class="dv">1</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">}</span><span class="ss">% is </span><span class="sc">{</span>list_of_percentiles[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The cold threshold of 30.0% is -0.1
The hot threshold of 70.0% is 0.1</code></pre>
</div>
</div>
<div id="cell-18" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a variable that has years 1981 to 2010, and months Jan to Dec (inclusive)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>temp_all_months <span class="op">=</span> df.loc[(df.index <span class="op">&gt;=</span> <span class="dv">1981</span>) <span class="op">&amp;</span> (df.index <span class="op">&lt;=</span> <span class="dv">2010</span>), <span class="st">"Jan"</span>:<span class="st">"Dec"</span>]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Put all the data in stacked format and give the new columns sensible names</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>temp_all_months <span class="op">=</span> (</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    temp_all_months.stack()</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">"level_1"</span>: <span class="st">"month"</span>, <span class="dv">0</span>: <span class="st">"values"</span>})</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a look at the start of this data data:</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>temp_all_months.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1981</td>
<td>Jan</td>
<td>0.79</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1981</td>
<td>Feb</td>
<td>0.62</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1981</td>
<td>Mar</td>
<td>0.68</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1981</td>
<td>Apr</td>
<td>0.39</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1981</td>
<td>May</td>
<td>0.18</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-19" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>entries_less_than_q30 <span class="op">=</span> temp_all_months[<span class="st">"values"</span>] <span class="op">&lt;</span> list_of_percentiles[<span class="dv">0</span>]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>proportion_under_q30 <span class="op">=</span> entries_less_than_q30.mean()</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"The proportion under </span><span class="sc">{</span>list_of_percentiles[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>proportion_under_q30<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The proportion under -0.1 is 1.94%</code></pre>
</div>
</div>
<div id="cell-20" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>proportion_over_q70 <span class="op">=</span> (temp_all_months[<span class="st">"values"</span>] <span class="op">&gt;</span> list_of_percentiles[<span class="dv">1</span>]).mean()</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The proportion over </span><span class="sc">{</span>list_of_percentiles[<span class="dv">1</span>]<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>proportion_over_q70<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The proportion over 0.1 is 84.72%</code></pre>
</div>
</div>
<div id="cell-21" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>temp_all_months <span class="op">=</span> (</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    df.loc[:, <span class="st">"DJF"</span>:<span class="st">"SON"</span>]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    .stack()</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">"level_1"</span>: <span class="st">"Season"</span>, <span class="dv">0</span>: <span class="st">"Values"</span>})</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>temp_all_months[<span class="st">"Period"</span>] <span class="op">=</span> pd.cut(</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    temp_all_months[<span class="st">"Year"</span>],</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span>[<span class="dv">1921</span>, <span class="dv">1950</span>, <span class="dv">1980</span>, <span class="dv">2010</span>],</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    labels<span class="op">=</span>[<span class="st">"1921—1950"</span>, <span class="st">"1951—1980"</span>, <span class="st">"1981—2010"</span>],</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    ordered<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a look at a cut of the data using `.iloc`, which provides position</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>temp_all_months.iloc[<span class="op">-</span><span class="dv">135</span>:<span class="op">-</span><span class="dv">125</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Season</th>
<th data-quarto-table-cell-role="th">Values</th>
<th data-quarto-table-cell-role="th">Period</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">443</td>
<td>1991</td>
<td>DJF</td>
<td>0.51</td>
<td>1981—2010</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">444</td>
<td>1991</td>
<td>MAM</td>
<td>0.45</td>
<td>1981—2010</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">445</td>
<td>1991</td>
<td>JJA</td>
<td>0.42</td>
<td>1981—2010</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">446</td>
<td>1991</td>
<td>SON</td>
<td>0.32</td>
<td>1981—2010</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">447</td>
<td>1992</td>
<td>DJF</td>
<td>0.43</td>
<td>1981—2010</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">448</td>
<td>1992</td>
<td>MAM</td>
<td>0.30</td>
<td>1981—2010</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">449</td>
<td>1992</td>
<td>JJA</td>
<td>-0.04</td>
<td>1981—2010</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">450</td>
<td>1992</td>
<td>SON</td>
<td>-0.15</td>
<td>1981—2010</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">451</td>
<td>1993</td>
<td>DJF</td>
<td>0.37</td>
<td>1981—2010</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">452</td>
<td>1993</td>
<td>MAM</td>
<td>0.31</td>
<td>1981—2010</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-22" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>grp_mean_var <span class="op">=</span> temp_all_months.groupby([<span class="st">"Season"</span>, <span class="st">"Period"</span>])[<span class="st">"Values"</span>].agg(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    [np.mean, np.var]</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>grp_mean_var</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">var</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Season</th>
<th data-quarto-table-cell-role="th">Period</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">DJF</td>
<td data-quarto-table-cell-role="th">1921—1950</td>
<td>-0.027931</td>
<td>0.057703</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1951—1980</td>
<td>-0.003333</td>
<td>0.050375</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1981—2010</td>
<td>0.522000</td>
<td>0.078644</td>
</tr>
<tr class="even">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">JJA</td>
<td data-quarto-table-cell-role="th">1921—1950</td>
<td>-0.054483</td>
<td>0.021611</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1951—1980</td>
<td>0.001333</td>
<td>0.014640</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1981—2010</td>
<td>0.399000</td>
<td>0.067775</td>
</tr>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">MAM</td>
<td data-quarto-table-cell-role="th">1921—1950</td>
<td>-0.041724</td>
<td>0.031136</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1951—1980</td>
<td>0.000333</td>
<td>0.025272</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1981—2010</td>
<td>0.507667</td>
<td>0.075812</td>
</tr>
<tr class="even">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">SON</td>
<td data-quarto-table-cell-role="th">1921—1950</td>
<td>0.081379</td>
<td>0.027798</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1951—1980</td>
<td>-0.001333</td>
<td>0.026384</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1981—2010</td>
<td>0.427000</td>
<td>0.110739</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-23" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>min_year <span class="op">=</span> <span class="dv">1880</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    ggplot(temp_all_months, aes(x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Values"</span>, color<span class="op">=</span><span class="st">"Season"</span>))</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_abline(slope<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line(size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="ss">f"Average annual temperature anomaly in </span><span class="ch">\n</span><span class="ss"> in the northern hemisphere (</span><span class="sc">{</span>min_year<span class="sc">}</span><span class="ss">—</span><span class="sc">{</span>temp_all_months[<span class="st">'Year'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">)"</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">"Annual temperature anomalies"</span>,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(<span class="bu">format</span><span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_text(</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>min_year, y<span class="op">=</span><span class="fl">0.1</span>, label<span class="op">=</span><span class="st">"1951—1980 average"</span>, hjust<span class="op">=</span><span class="st">"left"</span>, color<span class="op">=</span><span class="st">"black"</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" display="block" class="plt-container" width="600.0" height="400.0">
  <style type="text/css">
  .plt-container {
   font-family: Lucida Grande, sans-serif;
   user-select: none;
   -webkit-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
}
text {
   text-rendering: optimizeLegibility;
}
#pcqnkIQ .plot-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 16.0px;

}
#pcqnkIQ .plot-subtitle {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pcqnkIQ .plot-caption {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pcqnkIQ .hyperlink-element {
fill: #118ed8;
font-weight: normal;
   font-style: normal;
}
#pcqnkIQ .legend-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pcqnkIQ .legend-item {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pcqnkIQ .axis-title-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pcqnkIQ .axis-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFqJVNl .axis-tooltip-text-x {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pcqnkIQ .axis-title-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pcqnkIQ .axis-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFqJVNl .axis-tooltip-text-y {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pcqnkIQ .facet-strip-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pcqnkIQ .facet-strip-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFqJVNl .tooltip-text {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFqJVNl .tooltip-title {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFqJVNl .tooltip-label {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}

  </style>
  <g id="pcqnkIQ">
    <path fill-rule="evenodd" fill="rgb(255,255,255)" fill-opacity="1.0" d="M0.0 0.0 L0.0 400.0 L600.0 400.0 L600.0 0.0 Z">
    </path>
    <g transform="translate(29.5 42.5 ) ">
      <g>
        <g transform="translate(35.01530667574961 0.0 ) ">
          <g>
            <line x1="20.292512015615102" y1="0.0" x2="20.292512015615102" y2="305.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="76.66060094787917" y1="0.0" x2="76.66060094787917" y2="305.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="133.02868988014325" y1="0.0" x2="133.02868988014325" y2="305.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="189.39677881240732" y1="0.0" x2="189.39677881240732" y2="305.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="245.7648677446714" y1="0.0" x2="245.7648677446714" y2="305.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="302.13295667693546" y1="0.0" x2="302.13295667693546" y2="305.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="358.50104560919954" y1="0.0" x2="358.50104560919954" y2="305.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="414.8691345414636" y1="0.0" x2="414.8691345414636" y2="305.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
          </g>
        </g>
        <g transform="translate(35.01530667574961 0.0 ) ">
          <g>
            <line x1="0.0" y1="286.33925762818495" x2="446.4352643435323" y2="286.33925762818495" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="238.36819754639822" x2="446.4352643435323" y2="238.36819754639822" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="190.3971374646115" x2="446.4352643435323" y2="190.3971374646115" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="142.42607738282476" x2="446.4352643435323" y2="142.42607738282476" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="94.45501730103804" x2="446.4352643435323" y2="94.45501730103804" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="46.48395721925132" x2="446.4352643435323" y2="46.48395721925132" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
          </g>
        </g>
      </g>
      <g clip-path="url(#cMnEn4a)" clip-bounds-jfx="[rect (35.01530667574961, 0.0), (446.4352643435323, 305.0)]">
        <g transform="translate(35.01530667574961 0.0 ) ">
          <g>
            <g>
              <line x1="0.0" y1="190.3971374646115" x2="446.43526434353225" y2="190.39713746461146" stroke="rgb(0,0,0)" stroke-opacity="1.0" fill="none" stroke-width="2.2">
              </line>
            </g>
            <g>
              <g>
                <path d="M20.292512015615102 209.58556149732618 L20.292512015615102 209.58556149732618 L23.110916462228488 191.35655866624722 L25.929320908841873 206.70729789241898 L28.74772535545435 213.42324630386912 L31.566129802067735 241.24646115130543 L34.38453424868112 232.6116703365838 L37.202938695294506 235.48993394149102 L40.02134314190789 225.89572192513367 L42.83974758852037 223.01745832022647 L45.65815203513375 187.51887385970429 L48.47655648174714 224.93630072349794 L51.294960928360524 212.4638251022334 L54.11336537497391 233.57109153821955 L56.931769821586386 224.93630072349794 L59.75017426819977 223.9768795218622 L62.56857871481316 223.01745832022647 L65.38698316142654 231.65224913494808 L68.20538760803993 201.9101918842403 L71.0237920546524 234.53051273985528 L73.84219650126579 224.93630072349794 L76.66060094787917 194.23482227115443 L79.47900539449256 182.7217678515256 L82.29740984110595 227.81456432840514 L85.11581428771842 224.93630072349794 L87.93421873433181 235.48993394149102 L90.75262318094519 222.05803711859073 L93.57102762755858 203.82903428751177 L96.38943207417196 233.57109153821955 L99.20783652078444 238.36819754639822 L102.02624096739783 248.9218307643913 L104.84464541401121 229.7334067316766 L107.6630498606246 240.2870399496697 L110.48145430723798 219.17977351368353 L113.29985875385046 239.32761874803396 L116.11826320046384 221.098615916955 L118.93666764707723 197.11308587606163 L121.75507209369061 226.8551431267694 L124.573476540304 258.51604278074865 L127.39188098691648 233.57109153821955 L130.21028543352986 223.9768795218622 L133.02868988014325 203.82903428751177 L135.84709432675663 207.6667190940547 L138.66549877337002 204.7884554891475 L141.4839032199825 232.6116703365838 L144.30230766659588 199.99134948096884 L147.12071211320927 209.58556149732618 L149.93911655982265 189.43771626297575 L152.75752100643604 218.2203523120478 L155.5759254530485 212.4638251022334 L158.3943298996619 215.3420887071406 L161.21273434627528 197.11308587606163 L164.03113879288867 201.9101918842403 L166.84954323950205 196.1536646744259 L169.66794768611544 212.4638251022334 L172.48635213272792 204.7884554891475 L175.3047565793413 208.62614029569045 L178.1231610259547 195.19424347279016 L180.94156547256807 196.1536646744259 L183.75996991918146 168.3304498269896 L186.57837436579393 199.99134948096884 L189.39677881240732 175.04639823843974 L192.2151832590207 175.04639823843974 L195.0335877056341 181.76234664988988 L197.85199215224748 173.12755583516827 L200.67039659885995 166.41160742371812 L203.48880104547334 175.04639823843974 L206.30720549208672 175.04639823843974 L209.1256099387001 172.16813463353253 L211.9440143853135 194.23482227115443 L214.76241883192597 189.43771626297575 L217.58082327853936 197.11308587606163 L220.39922772515274 188.47829506134002 L223.21763217176613 186.55945265806855 L226.0360366183795 161.61450141553945 L228.854441064992 198.07250707769737 L231.67284551160537 216.30150990877632 L234.49124995821876 215.3420887071406 L237.30965440483214 198.07250707769737 L240.12805885144553 180.80292544825414 L242.946463298058 171.2087134318968 L245.7648677446714 205.74787669078324 L248.58327219128478 176.9652406417112 L251.40167663789816 173.12755583516827 L254.22008108451155 194.23482227115443 L257.038485531124 213.42324630386912 L259.8568899777374 205.74787669078324 L262.6752944243508 199.0319282793331 L265.4936988709642 175.04639823843974 L268.31210331757757 177.92466184334694 L271.13050776419004 192.31597986788296 L273.9489122108034 193.2754010695187 L276.7673166574168 209.58556149732618 L279.5857211040302 199.0319282793331 L282.4041255506436 171.2087134318968 L285.22252999725606 199.0319282793331 L288.04093444386945 186.55945265806855 L290.85933889048283 207.6667190940547 L293.6777433370962 166.41160742371812 L296.4961477837096 183.68118905316135 L299.314552230323 189.43771626297575 L302.13295667693546 175.04639823843974 L304.95136112354885 151.06086819754637 L307.76976557016224 180.80292544825414 L310.5881700167756 173.12755583516827 L313.406574463389 179.8435042466184 L316.2249789100015 188.47829506134002 L319.04338335661487 171.2087134318968 L321.86178780322825 180.80292544825414 L324.68019224984164 147.22318339100343 L327.498596696455 158.73623781063225 L330.3170011430675 114.60286253538847 L333.1354055896809 147.22318339100343 L335.95381003629427 161.61450141553945 L338.77221448290766 160.65508021390372 L341.59061892952104 147.22318339100343 L344.4090233761335 135.71012897137462 L347.2274278227469 163.53334381881092 L350.0458322693603 137.62897137464608 L352.8642367159737 118.4405473419314 L355.68264116258706 152.0202893991821 L358.50104560919954 118.4405473419314 L361.3194500558129 125.15649575338153 L364.1378545024263 122.27823214847434 L366.9562589490397 127.075338156653 L369.7746633956531 124.19707455174581 L372.59306784226555 105.96807172066686 L375.41147228887894 122.27823214847434 L378.2298767354923 104.04922931739539 L381.0482811821057 113.64344133375273 L383.8666856287191 128.99418055992447 L386.6850900753316 88.69849009122363 L389.50349452194496 114.60286253538847 L392.32189896855834 104.04922931739539 L395.14030341517173 118.4405473419314 L397.9587078617851 88.69849009122363 L400.7771123083976 82.94196288140921 L403.595516755011 47.44337842088706 L406.41392120162436 74.30717206668761 L409.23232564823775 89.65791129285937 L412.05073009485113 69.51006605850894 L414.8691345414636 52.24048442906573 L417.687538988077 82.94196288140921 L420.5059434346904 78.14485687323057 L423.32434788130377 69.51006605850894 L426.14275232791715 30.173796791443834 " fill="none" stroke-width="2.2" stroke="rgb(228,26,28)" stroke-opacity="1.0">
                </path>
              </g>
              <g>
                <path d="M20.292512015615102 211.50440390059765 L20.292512015615102 211.50440390059765 L23.110916462228488 199.99134948096884 L25.929320908841873 213.42324630386912 L28.74772535545435 203.82903428751177 L31.566129802067735 233.57109153821955 L34.38453424868112 228.77398553004087 L37.202938695294506 221.098615916955 L40.02134314190789 223.01745832022647 L42.83974758852037 199.0319282793331 L45.65815203513375 201.9101918842403 L48.47655648174714 216.30150990877632 L51.294960928360524 202.86961308587604 L54.11336537497391 215.3420887071406 L56.931769821586386 212.4638251022334 L59.75017426819977 219.17977351368353 L62.56857871481316 213.42324630386912 L65.38698316142654 193.2754010695187 L68.20538760803993 194.23482227115443 L71.0237920546524 203.82903428751177 L73.84219650126579 210.54498269896192 L76.66060094787917 200.95077068260457 L79.47900539449256 195.19424347279016 L82.29740984110595 223.9768795218622 L85.11581428771842 237.4087763447625 L87.93421873433181 243.1653035545769 L90.75262318094519 214.38266750550486 L93.57102762755858 208.62614029569045 L96.38943207417196 232.6116703365838 L99.20783652078444 229.7334067316766 L102.02624096739783 233.57109153821955 L104.84464541401121 229.7334067316766 L107.6630498606246 228.77398553004087 L110.48145430723798 236.44935514312675 L113.29985875385046 238.36819754639822 L116.11826320046384 218.2203523120478 L118.93666764707723 203.82903428751177 L121.75507209369061 229.7334067316766 L124.573476540304 229.7334067316766 L127.39188098691648 228.77398553004087 L130.21028543352986 223.9768795218622 L133.02868988014325 217.26093111041206 L135.84709432675663 205.74787669078324 L138.66549877337002 216.30150990877632 L141.4839032199825 217.26093111041206 L144.30230766659588 212.4638251022334 L147.12071211320927 213.42324630386912 L149.93911655982265 204.7884554891475 L152.75752100643604 202.86961308587604 L155.5759254530485 210.54498269896192 L158.3943298996619 220.13919471531926 L161.21273434627528 194.23482227115443 L164.03113879288867 179.8435042466184 L166.84954323950205 200.95077068260457 L169.66794768611544 208.62614029569045 L172.48635213272792 194.23482227115443 L175.3047565793413 198.07250707769737 L178.1231610259547 185.60003145643282 L180.94156547256807 176.00581944007547 L183.75996991918146 190.3971374646115 L186.57837436579393 185.60003145643282 L189.39677881240732 177.92466184334694 L192.2151832590207 169.28987102862533 L195.0335877056341 189.43771626297575 L197.85199215224748 190.3971374646115 L200.67039659885995 175.04639823843974 L203.48880104547334 176.9652406417112 L206.30720549208672 196.1536646744259 L209.1256099387001 192.31597986788296 L211.9440143853135 187.51887385970429 L214.76241883192597 201.9101918842403 L217.58082327853936 204.7884554891475 L220.39922772515274 181.76234664988988 L223.21763217176613 178.88408304498267 L226.0360366183795 169.28987102862533 L228.854441064992 195.19424347279016 L231.67284551160537 193.2754010695187 L234.49124995821876 211.50440390059765 L237.30965440483214 177.92466184334694 L240.12805885144553 182.7217678515256 L242.946463298058 180.80292544825414 L245.7648677446714 177.92466184334694 L248.58327219128478 180.80292544825414 L251.40167663789816 190.3971374646115 L254.22008108451155 183.68118905316135 L257.038485531124 204.7884554891475 L259.8568899777374 209.58556149732618 L262.6752944243508 180.80292544825414 L265.4936988709642 188.47829506134002 L268.31210331757757 197.11308587606163 L271.13050776419004 188.47829506134002 L273.9489122108034 192.31597986788296 L276.7673166574168 203.82903428751177 L279.5857211040302 198.07250707769737 L282.4041255506436 182.7217678515256 L285.22252999725606 203.82903428751177 L288.04093444386945 199.0319282793331 L290.85933889048283 211.50440390059765 L293.6777433370962 179.8435042466184 L296.4961477837096 201.9101918842403 L299.314552230323 184.64061025479708 L302.13295667693546 176.9652406417112 L304.95136112354885 173.12755583516827 L307.76976557016224 191.35655866624722 L310.5881700167756 172.16813463353253 L313.406574463389 182.7217678515256 L316.2249789100015 193.2754010695187 L319.04338335661487 185.60003145643282 L321.86178780322825 168.3304498269896 L324.68019224984164 155.85797420572504 L327.498596696455 164.49276502044665 L330.3170011430675 152.0202893991821 L333.1354055896809 150.10144699591063 L335.95381003629427 194.23482227115443 L338.77221448290766 178.88408304498267 L341.59061892952104 155.85797420572504 L344.4090233761335 145.30434098773196 L347.2274278227469 167.37102862535386 L350.0458322693603 146.2637621893677 L352.8642367159737 120.35938974520288 L355.68264116258706 158.73623781063225 L358.50104560919954 148.18260459263917 L361.3194500558129 131.87244416483168 L364.1378545024263 129.9536017615602 L366.9562589490397 124.19707455174581 L369.7746633956531 142.42607738282476 L372.59306784226555 119.39996854356714 L375.41147228887894 120.35938974520288 L378.2298767354923 126.11591695501727 L381.0482811821057 132.8318653664674 L383.8666856287191 124.19707455174581 L386.6850900753316 107.88691412393833 L389.50349452194496 121.31881094683861 L392.32189896855834 108.84633532557406 L395.14030341517173 120.35938974520288 L397.9587078617851 111.72459893048126 L400.7771123083976 95.41443850267378 L403.595516755011 84.8608052846807 L406.41392120162436 97.33328090594524 L409.23232564823775 105.00865051903112 L412.05073009485113 84.8608052846807 L414.8691345414636 82.94196288140921 L417.687538988077 84.8608052846807 L420.5059434346904 83.90138408304495 L423.32434788130377 56.07816923560867 L426.14275232791715 50.32164202579426 " fill="none" stroke-width="2.2" stroke="rgb(55,126,184)" stroke-opacity="1.0">
                </path>
              </g>
              <g>
                <path d="M20.292512015615102 222.05803711859073 L20.292512015615102 222.05803711859073 L23.110916462228488 225.89572192513367 L25.929320908841873 225.89572192513367 L28.74772535545435 221.098615916955 L31.566129802067735 238.36819754639822 L34.38453424868112 227.81456432840514 L37.202938695294506 223.9768795218622 L40.02134314190789 222.05803711859073 L42.83974758852037 199.0319282793331 L45.65815203513375 233.57109153821955 L48.47655648174714 225.89572192513367 L51.294960928360524 219.17977351368353 L54.11336537497391 232.6116703365838 L56.931769821586386 220.13919471531926 L59.75017426819977 225.89572192513367 L62.56857871481316 200.95077068260457 L65.38698316142654 200.95077068260457 L68.20538760803993 206.70729789241898 L71.0237920546524 224.93630072349794 L73.84219650126579 179.8435042466184 L76.66060094787917 188.47829506134002 L79.47900539449256 216.30150990877632 L82.29740984110595 227.81456432840514 L85.11581428771842 234.53051273985528 L87.93421873433181 226.8551431267694 L90.75262318094519 203.82903428751177 L93.57102762755858 217.26093111041206 L96.38943207417196 228.77398553004087 L99.20783652078444 235.48993394149102 L102.02624096739783 218.2203523120478 L104.84464541401121 234.53051273985528 L107.6630498606246 215.3420887071406 L110.48145430723798 260.4348851840201 L113.29985875385046 222.05803711859073 L116.11826320046384 207.6667190940547 L118.93666764707723 207.6667190940547 L121.75507209369061 233.57109153821955 L124.573476540304 231.65224913494808 L127.39188098691648 207.6667190940547 L130.21028543352986 215.3420887071406 L133.02868988014325 228.77398553004087 L135.84709432675663 199.99134948096884 L138.66549877337002 218.2203523120478 L141.4839032199825 189.43771626297575 L144.30230766659588 201.9101918842403 L147.12071211320927 187.51887385970429 L149.93911655982265 183.68118905316135 L152.75752100643604 177.92466184334694 L155.5759254530485 197.11308587606163 L158.3943298996619 198.07250707769737 L161.21273434627528 176.00581944007547 L164.03113879288867 163.53334381881092 L166.84954323950205 191.35655866624722 L169.66794768611544 211.50440390059765 L172.48635213272792 181.76234664988988 L175.3047565793413 197.11308587606163 L178.1231610259547 180.80292544825414 L180.94156547256807 163.53334381881092 L183.75996991918146 165.4521862220824 L186.57837436579393 176.00581944007547 L189.39677881240732 163.53334381881092 L192.2151832590207 165.4521862220824 L195.0335877056341 170.24929223026106 L197.85199215224748 159.69565901226798 L200.67039659885995 158.73623781063225 L203.48880104547334 173.12755583516827 L206.30720549208672 188.47829506134002 L209.1256099387001 172.16813463353253 L211.9440143853135 187.51887385970429 L214.76241883192597 189.43771626297575 L217.58082327853936 205.74787669078324 L220.39922772515274 168.3304498269896 L223.21763217176613 193.2754010695187 L226.0360366183795 173.12755583516827 L228.854441064992 172.16813463353253 L231.67284551160537 198.07250707769737 L234.49124995821876 218.2203523120478 L237.30965440483214 180.80292544825414 L240.12805885144553 184.64061025479708 L242.946463298058 186.55945265806855 L245.7648677446714 187.51887385970429 L248.58327219128478 190.3971374646115 L251.40167663789816 182.7217678515256 L254.22008108451155 158.73623781063225 L257.038485531124 216.30150990877632 L259.8568899777374 196.1536646744259 L262.6752944243508 191.35655866624722 L265.4936988709642 180.80292544825414 L268.31210331757757 199.0319282793331 L271.13050776419004 183.68118905316135 L273.9489122108034 198.07250707769737 L276.7673166574168 200.95077068260457 L279.5857211040302 206.70729789241898 L282.4041255506436 199.0319282793331 L285.22252999725606 209.58556149732618 L288.04093444386945 208.62614029569045 L290.85933889048283 221.098615916955 L293.6777433370962 177.92466184334694 L296.4961477837096 185.60003145643282 L299.314552230323 169.28987102862533 L302.13295667693546 176.9652406417112 L304.95136112354885 167.37102862535386 L307.76976557016224 192.31597986788296 L310.5881700167756 162.57392261717519 L313.406574463389 192.31597986788296 L316.2249789100015 188.47829506134002 L319.04338335661487 187.51887385970429 L321.86178780322825 167.37102862535386 L324.68019224984164 173.12755583516827 L327.498596696455 171.2087134318968 L330.3170011430675 147.22318339100343 L333.1354055896809 159.69565901226798 L335.95381003629427 204.7884554891475 L338.77221448290766 195.19424347279016 L341.59061892952104 146.2637621893677 L344.4090233761335 139.54781377791755 L347.2274278227469 176.9652406417112 L350.0458322693603 134.75070776973888 L352.8642367159737 138.58839257628182 L355.68264116258706 148.18260459263917 L358.50104560919954 163.53334381881092 L361.3194500558129 122.27823214847434 L364.1378545024263 128.03475935828874 L366.9562589490397 112.68402013211698 L369.7746633956531 117.48112614029567 L372.59306784226555 97.33328090594524 L375.41147228887894 104.04922931739539 L378.2298767354923 116.52170493865994 L381.0482811821057 114.60286253538847 L383.8666856287191 111.72459893048126 L386.6850900753316 101.17096571248818 L389.50349452194496 117.48112614029567 L392.32189896855834 103.08980811575965 L395.14030341517173 105.96807172066686 L397.9587078617851 107.88691412393833 L400.7771123083976 68.5506448568732 L403.595516755011 82.94196288140921 L406.41392120162436 86.77964768795216 L409.23232564823775 88.69849009122363 L412.05073009485113 73.34775086505188 L414.8691345414636 63.75353884869453 L417.687538988077 74.30717206668761 L420.5059434346904 77.18543567159483 L423.32434788130377 13.863636363636346 " fill="none" stroke-width="2.2" stroke="rgb(77,175,74)" stroke-opacity="1.0">
                </path>
              </g>
              <g>
                <path d="M23.110916462228488 222.05803711859073 L23.110916462228488 222.05803711859073 L25.929320908841873 182.7217678515256 L28.74772535545435 251.8000943692985 L31.566129802067735 203.82903428751177 L34.38453424868112 252.75951557093424 L37.202938695294506 245.08414595784836 L40.02134314190789 254.6783579742057 L42.83974758852037 239.32761874803396 L45.65815203513375 198.07250707769737 L48.47655648174714 247.00298836111983 L51.294960928360524 242.20588235294116 L54.11336537497391 213.42324630386912 L56.931769821586386 291.1363636363636 L59.75017426819977 253.71893677256998 L62.56857871481316 250.84067316766277 L65.38698316142654 216.30150990877632 L68.20538760803993 224.93630072349794 L71.0237920546524 213.42324630386912 L73.84219650126579 224.93630072349794 L76.66060094787917 230.69282793331234 L79.47900539449256 205.74787669078324 L82.29740984110595 209.58556149732618 L85.11581428771842 214.38266750550486 L87.93421873433181 252.75951557093424 L90.75262318094519 241.24646115130543 L93.57102762755858 230.69282793331234 L96.38943207417196 230.69282793331234 L99.20783652078444 235.48993394149102 L102.02624096739783 252.75951557093424 L104.84464541401121 232.6116703365838 L107.6630498606246 258.51604278074865 L110.48145430723798 217.26093111041206 L113.29985875385046 247.96240956275557 L116.11826320046384 185.60003145643282 L118.93666764707723 203.82903428751177 L121.75507209369061 207.6667190940547 L124.573476540304 266.1914123938345 L127.39188098691648 262.3537275872916 L130.21028543352986 233.57109153821955 L133.02868988014325 223.01745832022647 L135.84709432675663 210.54498269896192 L138.66549877337002 227.81456432840514 L141.4839032199825 216.30150990877632 L144.30230766659588 201.9101918842403 L147.12071211320927 222.05803711859073 L149.93911655982265 159.69565901226798 L152.75752100643604 210.54498269896192 L155.5759254530485 192.31597986788296 L158.3943298996619 234.53051273985528 L161.21273434627528 221.098615916955 L164.03113879288867 194.23482227115443 L166.84954323950205 179.8435042466184 L169.66794768611544 211.50440390059765 L172.48635213272792 200.95077068260457 L175.3047565793413 178.88408304498267 L178.1231610259547 220.13919471531926 L180.94156547256807 175.04639823843974 L183.75996991918146 170.24929223026106 L186.57837436579393 193.2754010695187 L189.39677881240732 164.49276502044665 L192.2151832590207 158.73623781063225 L195.0335877056341 174.086977036804 L197.85199215224748 172.16813463353253 L200.67039659885995 144.34491978609623 L203.48880104547334 188.47829506134002 L206.30720549208672 182.7217678515256 L209.1256099387001 206.70729789241898 L211.9440143853135 186.55945265806855 L214.76241883192597 198.07250707769737 L217.58082327853936 212.4638251022334 L220.39922772515274 222.05803711859073 L223.21763217176613 167.37102862535386 L226.0360366183795 170.24929223026106 L228.854441064992 191.35655866624722 L231.67284551160537 184.64061025479708 L234.49124995821876 210.54498269896192 L237.30965440483214 199.99134948096884 L240.12805885144553 152.0202893991821 L242.946463298058 172.16813463353253 L245.7648677446714 169.28987102862533 L248.58327219128478 162.57392261717519 L251.40167663789816 175.04639823843974 L254.22008108451155 169.28987102862533 L257.038485531124 191.35655866624722 L259.8568899777374 211.50440390059765 L262.6752944243508 199.99134948096884 L265.4936988709642 208.62614029569045 L268.31210331757757 203.82903428751177 L271.13050776419004 229.7334067316766 L273.9489122108034 173.12755583516827 L276.7673166574168 211.50440390059765 L279.5857211040302 228.77398553004087 L282.4041255506436 173.12755583516827 L285.22252999725606 211.50440390059765 L288.04093444386945 191.35655866624722 L290.85933889048283 199.99134948096884 L293.6777433370962 199.99134948096884 L296.4961477837096 183.68118905316135 L299.314552230323 202.86961308587604 L302.13295667693546 153.93913180245357 L304.95136112354885 142.42607738282476 L307.76976557016224 172.16813463353253 L310.5881700167756 149.1420257942749 L313.406574463389 176.00581944007547 L316.2249789100015 210.54498269896192 L319.04338335661487 163.53334381881092 L321.86178780322825 164.49276502044665 L324.68019224984164 140.5072349795533 L327.498596696455 161.61450141553945 L330.3170011430675 147.22318339100343 L333.1354055896809 141.46665618118902 L335.95381003629427 149.1420257942749 L338.77221448290766 154.8985530040893 L341.59061892952104 174.086977036804 L344.4090233761335 116.52170493865994 L347.2274278227469 155.85797420572504 L350.0458322693603 149.1420257942749 L352.8642367159737 121.31881094683861 L355.68264116258706 116.52170493865994 L358.50104560919954 128.99418055992447 L361.3194500558129 149.1420257942749 L364.1378545024263 100.21154451085245 L366.9562589490397 128.99418055992447 L369.7746633956531 108.84633532557406 L372.59306784226555 123.23765335011008 L375.41147228887894 112.68402013211698 L378.2298767354923 79.1042780748663 L381.0482811821057 136.66955017301035 L383.8666856287191 121.31881094683861 L386.6850900753316 113.64344133375273 L389.50349452194496 136.66955017301035 L392.32189896855834 123.23765335011008 L395.14030341517173 124.19707455174581 L397.9587078617851 109.8057565272098 L400.7771123083976 79.1042780748663 L403.595516755011 30.173796791443834 L406.41392120162436 64.71296005033027 L409.23232564823775 71.42890846178041 L412.05073009485113 81.9825416797735 L414.8691345414636 40.727430009436915 L417.687538988077 81.9825416797735 L420.5059434346904 76.2260144699591 L423.32434788130377 74.30717206668761 L426.14275232791715 16.74189996854355 " fill="none" stroke-width="2.2" stroke="rgb(152,78,163)" stroke-opacity="1.0">
                </path>
              </g>
            </g>
            <g>
              <g transform="rotate(0.0 20.292512015615102 180.80292544825414 ) ">
                <g transform="translate(20.292512015615102 185.00292544825413 ) ">
                  <text style="fill:#000000;font-size:14.0px;font-family:sans-serif;" fill-opacity="1.0" y="0.0">
                    <tspan>1951—1980 average</tspan>
                  </text>
                </g>
              </g>
            </g>
          </g>
        </g>
        <defs>
          <clippath id="cuf4WPi">
            <rect x="35.01530667574961" y="0.0" width="446.4352643435323" height="305.0">
            </rect>
          </clippath>
        </defs>
        <defs>
          <clippath id="c1a2Xnz">
            <rect x="35.01530667574961" y="0.0" width="446.4352643435323" height="305.0">
            </rect>
          </clippath>
        </defs>
        <defs>
          <clippath id="cMnEn4a">
            <rect x="35.01530667574961" y="0.0" width="446.4352643435323" height="305.0">
            </rect>
          </clippath>
        </defs>
      </g>
      <g>
        <g transform="translate(35.01530667574961 305.0 ) ">
          <g transform="translate(20.292512015615102 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1880</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(76.66060094787917 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1900</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(133.02868988014325 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1920</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(189.39677881240732 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1940</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(245.7648677446714 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1960</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(302.13295667693546 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1980</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(358.50104560919954 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>2000</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(414.8691345414636 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>2020</tspan>
              </text>
            </g>
          </g>
          <line x1="0.0" y1="0.0" x2="446.4352643435323" y2="0.0" stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0">
          </line>
        </g>
        <g transform="translate(35.01530667574961 0.0 ) ">
          <g transform="translate(0.0 286.33925762818495 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>-1.0</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 238.36819754639822 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>-0.5</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 190.3971374646115 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>0.0</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 142.42607738282476 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>0.5</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 94.45501730103804 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>1.0</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 46.48395721925132 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>1.5</tspan>
              </text>
            </g>
          </g>
        </g>
      </g>
    </g>
    <g transform="translate(64.51530667574961 16.8 ) ">
      <text class="plot-title" y="0.0">
        <tspan>Average annual temperature anomaly in </tspan>
      </text>
      <text class="plot-title" y="16.0">
        <tspan> in the northern hemisphere (1880—2024)</tspan>
      </text>
    </g>
    <g transform="translate(16.0 195.0 ) rotate(-90.0 ) ">
      <text class="axis-title-y" y="0.0" text-anchor="middle">
        <tspan>Annual temperature anomalies</tspan>
      </text>
    </g>
    <g transform="translate(287.73293884751575 393.0 ) ">
      <text class="axis-title-x" y="0.0" text-anchor="middle">
        <tspan>Year</tspan>
      </text>
    </g>
    <g transform="translate(522.4505710192819 132.75 ) ">
      <rect x="0.0" y="0.0" height="124.5" width="77.54942898071809" stroke="rgb(71,71,71)" stroke-opacity="1.0" stroke-width="0.0" fill="rgb(255,255,255)" fill-opacity="1.0">
      </rect>
      <g transform="translate(5.0 5.0 ) ">
        <g transform="translate(0.0 12.0 ) ">
          <text class="legend-title" y="0.0">
            <tspan>Season</tspan>
          </text>
        </g>
        <g transform="translate(0.0 22.5 ) ">
          <g transform="">
            <g>
              <g transform="translate(1.0 1.0 ) ">
                <g>
                  <line x1="0.0" y1="10.5" x2="21.0" y2="10.5" stroke="rgb(228,26,28)" stroke-opacity="1.0" fill="rgb(255,255,255)" fill-opacity="1.0" stroke-width="1.6500000000000001">
                  </line>
                </g>
              </g>
            </g>
            <g transform="translate(26.9903027277341 16.05 ) ">
              <text class="legend-item" y="0.0">
                <tspan>MAM</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 23.0 ) ">
            <g>
              <g transform="translate(1.0 1.0 ) ">
                <g>
                  <line x1="0.0" y1="10.5" x2="21.0" y2="10.5" stroke="rgb(55,126,184)" stroke-opacity="1.0" fill="rgb(255,255,255)" fill-opacity="1.0" stroke-width="1.6500000000000001">
                  </line>
                </g>
              </g>
            </g>
            <g transform="translate(26.9903027277341 16.05 ) ">
              <text class="legend-item" y="0.0">
                <tspan>JJA</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 46.0 ) ">
            <g>
              <g transform="translate(1.0 1.0 ) ">
                <g>
                  <line x1="0.0" y1="10.5" x2="21.0" y2="10.5" stroke="rgb(77,175,74)" stroke-opacity="1.0" fill="rgb(255,255,255)" fill-opacity="1.0" stroke-width="1.6500000000000001">
                  </line>
                </g>
              </g>
            </g>
            <g transform="translate(26.9903027277341 16.05 ) ">
              <text class="legend-item" y="0.0">
                <tspan>SON</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 69.0 ) ">
            <g>
              <g transform="translate(1.0 1.0 ) ">
                <g>
                  <line x1="0.0" y1="10.5" x2="21.0" y2="10.5" stroke="rgb(152,78,163)" stroke-opacity="1.0" fill="rgb(255,255,255)" fill-opacity="1.0" stroke-width="1.6500000000000001">
                  </line>
                </g>
              </g>
            </g>
            <g transform="translate(26.9903027277341 16.05 ) ">
              <text class="legend-item" y="0.0">
                <tspan>DJF</tspan>
              </text>
            </g>
          </g>
        </g>
      </g>
    </g>
    <path fill="rgb(0,0,0)" fill-opacity="0.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" stroke-width="0.0" d="M0.0 0.0 L0.0 400.0 L600.0 400.0 L600.0 0.0 Z" pointer-events="none">
    </path>
  </g>
  <g id="dFqJVNl">
  </g>
</svg>
</div>
</div>
<div id="cell-24" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df_co2 <span class="op">=</span> pd.read_csv(<span class="st">"D:\Yang Fan\data\data2(1).csv"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>df_co2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Month</th>
<th data-quarto-table-cell-role="th">Monthly average</th>
<th data-quarto-table-cell-role="th">Interpolated</th>
<th data-quarto-table-cell-role="th">Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1958</td>
<td>3</td>
<td>315.71</td>
<td>315.71</td>
<td>314.62</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1958</td>
<td>4</td>
<td>317.45</td>
<td>317.45</td>
<td>315.29</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1958</td>
<td>5</td>
<td>317.50</td>
<td>317.50</td>
<td>314.71</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1958</td>
<td>6</td>
<td>-99.99</td>
<td>317.10</td>
<td>314.85</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1958</td>
<td>7</td>
<td>315.86</td>
<td>315.86</td>
<td>314.98</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-25" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df_co2_june <span class="op">=</span> df_co2.loc[df_co2[<span class="st">"Month"</span>] <span class="op">==</span> <span class="dv">6</span>]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>df_co2_june.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Month</th>
<th data-quarto-table-cell-role="th">Monthly average</th>
<th data-quarto-table-cell-role="th">Interpolated</th>
<th data-quarto-table-cell-role="th">Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>1958</td>
<td>6</td>
<td>-99.99</td>
<td>317.10</td>
<td>314.85</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>1959</td>
<td>6</td>
<td>318.15</td>
<td>318.15</td>
<td>315.92</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>1960</td>
<td>6</td>
<td>319.59</td>
<td>319.59</td>
<td>317.36</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">39</td>
<td>1961</td>
<td>6</td>
<td>319.77</td>
<td>319.77</td>
<td>317.48</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">51</td>
<td>1962</td>
<td>6</td>
<td>320.55</td>
<td>320.55</td>
<td>318.27</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-26" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df_temp_co2 <span class="op">=</span> pd.merge(df_co2_june, df, on<span class="op">=</span><span class="st">"Year"</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df_temp_co2[[<span class="st">"Year"</span>, <span class="st">"Jun"</span>, <span class="st">"Trend"</span>]].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Jun</th>
<th data-quarto-table-cell-role="th">Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1958</td>
<td>0.05</td>
<td>314.85</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1959</td>
<td>0.14</td>
<td>315.92</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1960</td>
<td>0.18</td>
<td>317.36</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1961</td>
<td>0.18</td>
<td>317.48</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1962</td>
<td>-0.13</td>
<td>318.27</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-27" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    ggplot(df_temp_co2, aes(x<span class="op">=</span><span class="st">"Jun"</span>, y<span class="op">=</span><span class="st">"Trend"</span>))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(color<span class="op">=</span><span class="st">"black"</span>, size<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Scatterplot of temperature anomalies vs carbon dioxide emissions"</span>,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">"Carbon dioxide levels (trend, mole fraction)"</span>,</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Temperature anomaly (degrees Celsius)"</span>,</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" display="block" class="plt-container" width="600.0" height="400.0">
  <style type="text/css">
  .plt-container {
   font-family: Lucida Grande, sans-serif;
   user-select: none;
   -webkit-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
}
text {
   text-rendering: optimizeLegibility;
}
#pk8aqUd .plot-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 16.0px;

}
#pk8aqUd .plot-subtitle {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pk8aqUd .plot-caption {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pk8aqUd .hyperlink-element {
fill: #118ed8;
font-weight: normal;
   font-style: normal;
}
#pk8aqUd .legend-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pk8aqUd .legend-item {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pk8aqUd .axis-title-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pk8aqUd .axis-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dsbfbTt .axis-tooltip-text-x {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pk8aqUd .axis-title-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pk8aqUd .axis-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dsbfbTt .axis-tooltip-text-y {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pk8aqUd .facet-strip-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pk8aqUd .facet-strip-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dsbfbTt .tooltip-text {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dsbfbTt .tooltip-title {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dsbfbTt .tooltip-label {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}

  </style>
  <g id="pk8aqUd">
    <path fill-rule="evenodd" fill="rgb(255,255,255)" fill-opacity="1.0" d="M0.0 0.0 L0.0 400.0 L600.0 400.0 L600.0 0.0 Z">
    </path>
    <g transform="translate(29.5 26.5 ) ">
      <g>
        <g transform="translate(29.941816366404606 0.0 ) ">
          <g>
            <line x1="24.275371983345238" y1="0.0" x2="24.275371983345238" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="97.83710526620962" y1="0.0" x2="97.83710526620962" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="171.39883854907401" y1="0.0" x2="171.39883854907401" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="244.96057183193838" y1="0.0" x2="244.96057183193838" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="318.52230511480275" y1="0.0" x2="318.52230511480275" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="392.08403839766714" y1="0.0" x2="392.08403839766714" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="465.6457716805315" y1="0.0" x2="465.6457716805315" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
          </g>
        </g>
        <g transform="translate(29.941816366404606 0.0 ) ">
          <g>
            <line x1="0.0" y1="290.01659923845796" x2="534.0581836335954" y2="290.01659923845796" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="226.35643741075683" x2="534.0581836335954" y2="226.35643741075683" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="162.6962755830557" x2="534.0581836335954" y2="162.6962755830557" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="99.03611375535456" x2="534.0581836335954" y2="99.03611375535456" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="35.37595192765343" x2="534.0581836335954" y2="35.37595192765343" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
          </g>
        </g>
      </g>
      <g clip-path="url(#cyienh0)" clip-bounds-jfx="[rect (29.941816366404606, 0.0), (534.0581836335954, 321.0)]">
        <g transform="translate(29.941816366404606 0.0 ) ">
          <g>
            <g>
              <g>
                <g>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="116.22753858692572" cy="306.4090909090909" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="149.33031856421468" cy="303.0032722513089" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="164.04266522078757" cy="298.4197405997144" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="164.04266522078757" cy="298.03777962874824" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="50.021978632347775" cy="295.5232032365541" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="83.12475860963674" cy="292.69032603522123" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="64.73432528892064" cy="291.00333174678724" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="24.275371983345238" cy="291.1306520704427" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="119.90562525106893" cy="285.17842693955265" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="75.76858528135031" cy="283.8415635411709" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="83.12475860963674" cy="279.83097334602576" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="83.12475860963674" cy="275.279271775345" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="105.19327859449605" cy="272.4463945740124" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="46.34389196820455" cy="269.64534745359356" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="61.05623862477743" cy="267.99018324607323" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="156.68649189250112" cy="258.3774988100904" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="31.631545311631683" cy="258.3774988100904" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="68.41241195306387" cy="254.36690861494526" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="24.275371983345238" cy="252.93455497382206" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="178.75501187736043" cy="246.09108757734407" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="46.34389196820455" cy="240.39350309376505" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="123.58371191521215" cy="236.41474297953368" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="167.7207518849308" cy="230.0487267967635" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="200.82353186221974" cy="226.13362684435992" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="101.51519193035284" cy="222.05937648738677" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="138.296058571785" cy="216.32996192289397" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="130.9398852434986" cy="212.00107091861014" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="97.83710526620962" cy="207.44936934792963" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="149.33031856421468" cy="202.42021656354132" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="156.68649189250112" cy="197.0727629700143" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="244.96057183193838" cy="190.16563541170876" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="186.11118520564685" cy="185.07282246549244" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="274.3852651450841" cy="181.88981437410757" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="270.7071784809409" cy="176.06490956687276" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="112.5494519227825" cy="172.3407900999523" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="178.75501187736043" cy="171.86333888624472" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="248.63865849608158" cy="167.66176820561645" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="281.7414384733705" cy="160.0225487862922" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="189.78927186979007" cy="154.13398381722982" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="278.06335180922736" cy="151.84221799143256" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="362.65934508452136" cy="141.05182056163721" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="222.89205184707907" cy="136.81841980009517" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="259.67291848851124" cy="132.45769871489756" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="285.4195251375138" cy="127.71501665873393" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="347.94699842794853" cy="120.36226796763435" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="296.4537851299434" cy="111.67265587815336" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="267.0290918167977" cy="107.34376487386953" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="384.7278650693807" cy="99.41807472632081" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="392.08403839766714" cy="93.46584959543065" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="336.9127384355188" cy="86.81336268443602" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="322.2003917789459" cy="81.65688957639213" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="340.5908250996621" cy="75.99113517372666" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="403.11829839009675" cy="67.55616373155635" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="377.37169174109425" cy="62.6225011899096" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="439.899165031529" cy="56.22465492622564" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="381.0497784052375" cy="47.21674202760596" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="392.08403839766714" cy="38.71811042360787" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="487.7142916653908" cy="33.816277962874665" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="509.78281165025015" cy="21.05241551642075" r="3.3000000000000003"></circle>
                  <circle fill="#000000" stroke="#000000" stroke-opacity="0.0" stroke-width="0.0" cx="439.899165031529" cy="14.590909090909008" r="3.3000000000000003"></circle>
                </g>
              </g>
            </g>
          </g>
        </g>
        <defs>
          <clippath id="cyienh0">
            <rect x="29.941816366404606" y="0.0" width="534.0581836335954" height="321.0">
            </rect>
          </clippath>
        </defs>
      </g>
      <g>
        <g transform="translate(29.941816366404606 321.0 ) ">
          <g transform="translate(24.275371983345238 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>-0.2</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(97.83710526620962 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>0.0</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(171.39883854907401 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>0.2</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(244.96057183193838 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>0.4</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(318.52230511480275 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>0.6</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(392.08403839766714 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>0.8</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(465.6457716805315 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1.0</tspan>
              </text>
            </g>
          </g>
          <line x1="0.0" y1="0.0" x2="534.0581836335954" y2="0.0" stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0">
          </line>
        </g>
        <g transform="translate(29.941816366404606 0.0 ) ">
          <g transform="translate(0.0 290.01659923845796 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>320</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 226.35643741075683 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>340</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 162.6962755830557 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>360</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 99.03611375535456 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>380</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 35.37595192765343 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>400</tspan>
              </text>
            </g>
          </g>
        </g>
      </g>
    </g>
    <g transform="translate(59.44181636640461 16.8 ) ">
      <text class="plot-title" y="0.0">
        <tspan>Scatterplot of temperature anomalies vs carbon dioxide emissions</tspan>
      </text>
    </g>
    <g transform="translate(16.0 187.0 ) rotate(-90.0 ) ">
      <text class="axis-title-y" y="0.0" text-anchor="middle">
        <tspan>Carbon dioxide levels (trend, mole fraction)</tspan>
      </text>
    </g>
    <g transform="translate(326.4709081832023 393.0 ) ">
      <text class="axis-title-x" y="0.0" text-anchor="middle">
        <tspan>Temperature anomaly (degrees Celsius)</tspan>
      </text>
    </g>
    <path fill="rgb(0,0,0)" fill-opacity="0.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" stroke-width="0.0" d="M0.0 0.0 L0.0 400.0 L600.0 400.0 L600.0 0.0 Z" pointer-events="none">
    </path>
  </g>
  <g id="dsbfbTt">
  </g>
</svg>
</div>
</div>
<div id="cell-28" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>df_temp_co2[[<span class="st">"Jun"</span>, <span class="st">"Trend"</span>]].corr(method<span class="op">=</span><span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Jun</th>
<th data-quarto-table-cell-role="th">Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Jun</td>
<td>1.000000</td>
<td>0.914371</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Trend</td>
<td>0.914371</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-29" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    ggplot(df_temp_co2, aes(x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Jun"</span>))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line(size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"June temperature anomalies"</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(<span class="bu">format</span><span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" display="block" class="plt-container" width="600.0" height="400.0">
  <style type="text/css">
  .plt-container {
   font-family: Lucida Grande, sans-serif;
   user-select: none;
   -webkit-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
}
text {
   text-rendering: optimizeLegibility;
}
#p0l8GbM .plot-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 16.0px;

}
#p0l8GbM .plot-subtitle {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#p0l8GbM .plot-caption {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#p0l8GbM .hyperlink-element {
fill: #118ed8;
font-weight: normal;
   font-style: normal;
}
#p0l8GbM .legend-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#p0l8GbM .legend-item {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#p0l8GbM .axis-title-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#p0l8GbM .axis-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dG6PKLE .axis-tooltip-text-x {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#p0l8GbM .axis-title-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#p0l8GbM .axis-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dG6PKLE .axis-tooltip-text-y {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#p0l8GbM .facet-strip-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#p0l8GbM .facet-strip-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dG6PKLE .tooltip-text {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dG6PKLE .tooltip-title {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dG6PKLE .tooltip-label {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}

  </style>
  <g id="p0l8GbM">
    <path fill-rule="evenodd" fill="rgb(255,255,255)" fill-opacity="1.0" d="M0.0 0.0 L0.0 400.0 L600.0 400.0 L600.0 0.0 Z">
    </path>
    <g transform="translate(29.5 26.5 ) ">
      <g>
        <g transform="translate(35.01530667574961 0.0 ) ">
          <g>
            <line x1="40.3462901687999" y1="0.0" x2="40.3462901687999" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="121.85394707546402" y1="0.0" x2="121.85394707546402" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="203.36160398212814" y1="0.0" x2="203.36160398212814" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="284.86926088879227" y1="0.0" x2="284.86926088879227" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="366.3769177954564" y1="0.0" x2="366.3769177954564" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="447.8845747021205" y1="0.0" x2="447.8845747021205" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
          </g>
        </g>
        <g transform="translate(35.01530667574961 0.0 ) ">
          <g>
            <line x1="0.0" y1="306.40909090909093" x2="528.9846933242504" y2="306.40909090909093" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="262.1942148760331" x2="528.9846933242504" y2="262.1942148760331" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="217.9793388429752" x2="528.9846933242504" y2="217.9793388429752" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="173.76446280991738" x2="528.9846933242504" y2="173.76446280991738" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="129.5495867768595" x2="528.9846933242504" y2="129.5495867768595" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="85.33471074380168" x2="528.9846933242504" y2="85.33471074380168" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
            <line x1="0.0" y1="41.119834710743845" x2="528.9846933242504" y2="41.119834710743845" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
            </line>
          </g>
        </g>
      </g>
      <g clip-path="url(#cVZLGbD)" clip-bounds-jfx="[rect (35.01530667574961, 0.0), (528.9846933242504, 321.0)]">
        <g transform="translate(35.01530667574961 0.0 ) ">
          <g>
            <g>
              <g>
                <path d="M24.04475878746598 251.1404958677686 L24.04475878746598 251.1404958677686 L32.19552447813294 231.24380165289259 L40.3462901687999 222.40082644628103 L48.497055859465036 222.40082644628103 L56.647821550131994 290.93388429752065 L64.79858724079895 271.03719008264466 L72.94935293146591 282.0909090909091 L81.10011862213105 306.40909090909093 L89.25088431279801 248.92975206611573 L97.40165000346497 275.4586776859504 L105.5524156941301 271.03719008264466 L113.70318138479706 271.03719008264466 L121.85394707546402 257.7727272727273 L130.00471276612916 293.1446280991736 L138.15547845679612 284.301652892562 L146.30624414746308 226.8223140495868 L154.45700983812822 301.9876033057851 L162.60777552879517 279.8801652892562 L170.75854121946213 306.40909090909093 L178.9093069101291 213.55785123966945 L187.06007260079423 293.1446280991736 L195.2108382914612 246.71900826446281 L203.36160398212814 220.19008264462812 L211.51236967279328 200.2933884297521 L219.66313536346024 259.9834710743802 L227.8139010541272 237.87603305785126 L235.96466674479234 242.29752066115705 L244.1154324354593 262.1942148760331 L252.26619812612626 231.24380165289259 L260.4169638167932 226.8223140495868 L268.56772950745835 173.76446280991738 L276.7184951981253 209.13636363636365 L284.86926088879227 156.07851239669424 L293.0200265794574 158.28925619834715 L301.17079227012437 253.3512396694215 L309.3215579607913 213.55785123966945 L317.47232365145646 171.5537190082645 L325.6230893421234 151.65702479338847 L333.7738550327904 206.92561983471077 L341.9246207234555 153.86776859504135 L350.0753864141225 103.02066115702485 L358.22615210478943 187.02892561983472 L366.3769177954564 164.92148760330582 L374.52768348612153 149.44628099173556 L382.6784491767885 111.86363636363637 L390.82921486745545 142.8140495867769 L398.9799805581206 160.50000000000003 L407.13074624878755 89.75619834710747 L415.2815119394545 85.33471074380168 L423.43227763011964 118.49586776859508 L431.5830433207866 127.33884297520666 L439.73380901145356 116.28512396694217 L447.8845747021205 78.70247933884303 L456.03534039278566 94.17768595041326 L464.1861060834508 56.595041322314074 L472.3368717741196 91.96694214876035 L480.4876374647847 85.33471074380168 L488.6384031554535 27.85537190082647 L496.7891688461186 14.590909090909122 L504.93993453678377 56.595041322314074 " fill="none" stroke-width="2.2" stroke="rgb(71,71,71)" stroke-opacity="1.0">
                </path>
              </g>
            </g>
          </g>
        </g>
        <defs>
          <clippath id="cVZLGbD">
            <rect x="35.01530667574961" y="0.0" width="528.9846933242504" height="321.0">
            </rect>
          </clippath>
        </defs>
      </g>
      <g>
        <g transform="translate(35.01530667574961 321.0 ) ">
          <g transform="translate(40.3462901687999 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1960</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(121.85394707546402 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1970</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(203.36160398212814 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1980</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(284.86926088879227 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>1990</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(366.3769177954564 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>2000</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(447.8845747021205 0.0 ) ">
            <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
            </line>
            <g transform="translate(0.0 7.0 ) ">
              <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                <tspan>2010</tspan>
              </text>
            </g>
          </g>
          <line x1="0.0" y1="0.0" x2="528.9846933242504" y2="0.0" stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0">
          </line>
        </g>
        <g transform="translate(35.01530667574961 0.0 ) ">
          <g transform="translate(0.0 306.40909090909093 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>-0.2</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 262.1942148760331 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>0.0</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 217.9793388429752 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>0.2</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 173.76446280991738 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>0.4</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 129.5495867768595 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>0.6</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 85.33471074380168 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>0.8</tspan>
              </text>
            </g>
          </g>
          <g transform="translate(0.0 41.119834710743845 ) ">
            <g transform="translate(-3.0 0.0 ) ">
              <text class="axis-text-y" text-anchor="end" dy="0.35em">
                <tspan>1.0</tspan>
              </text>
            </g>
          </g>
        </g>
      </g>
    </g>
    <g transform="translate(64.51530667574961 16.8 ) ">
      <text class="plot-title" y="0.0">
        <tspan>June temperature anomalies</tspan>
      </text>
    </g>
    <g transform="translate(16.0 187.0 ) rotate(-90.0 ) ">
      <text class="axis-title-y" y="0.0" text-anchor="middle">
        <tspan>Jun</tspan>
      </text>
    </g>
    <g transform="translate(329.00765333787484 393.0 ) ">
      <text class="axis-title-x" y="0.0" text-anchor="middle">
        <tspan>Year</tspan>
      </text>
    </g>
    <path fill="rgb(0,0,0)" fill-opacity="0.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" stroke-width="0.0" d="M0.0 0.0 L0.0 400.0 L600.0 400.0 L600.0 0.0 Z" pointer-events="none">
    </path>
  </g>
  <g id="dG6PKLE">
  </g>
</svg>
</div>
</div>
<div id="cell-30" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="op">=</span> ggplot(df_temp_co2) <span class="op">+</span> scale_x_continuous(<span class="bu">format</span><span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>plot_p <span class="op">=</span> (</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    base_plot</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line(aes(x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Jun"</span>), size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(title<span class="op">=</span><span class="st">"June temperature anomalies"</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>plot_q <span class="op">=</span> (</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    base_plot</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line(aes(x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Trend"</span>), size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(title<span class="op">=</span><span class="st">"Carbon dioxide emissions"</span>)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>gggrid([plot_p, plot_q], ncol<span class="op">=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" display="block" class="plt-container" width="900.0" height="400.0">
  <g id="p4C6SA6">
    <rect x="0.0" y="0.0" height="400.0" width="900.0" fill="rgb(255,255,255)" fill-opacity="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" stroke-width="0.0">
    </rect>
  </g>
  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" display="block" class="plt-container" width="448.0" height="400.0" x="0.0" y="0.0">
    <style type="text/css">
    .plt-container {
   font-family: Lucida Grande, sans-serif;
   user-select: none;
   -webkit-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
}
text {
   text-rendering: optimizeLegibility;
}
#pAVABFk .plot-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 16.0px;

}
#pAVABFk .plot-subtitle {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pAVABFk .plot-caption {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pAVABFk .hyperlink-element {
fill: #118ed8;
font-weight: normal;
   font-style: normal;
}
#pAVABFk .legend-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pAVABFk .legend-item {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pAVABFk .axis-title-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pAVABFk .axis-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#duRJqFb .axis-tooltip-text-x {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pAVABFk .axis-title-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pAVABFk .axis-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#duRJqFb .axis-tooltip-text-y {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pAVABFk .facet-strip-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pAVABFk .facet-strip-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#duRJqFb .tooltip-text {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#duRJqFb .tooltip-title {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#duRJqFb .tooltip-label {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}

    </style>
    <g id="pAVABFk">
      <path fill-rule="evenodd" fill="rgb(255,255,255)" fill-opacity="1.0" d="M0.0 0.0 L0.0 400.0 L448.0 400.0 L448.0 0.0 Z">
      </path>
      <g transform="translate(29.5 26.5 ) ">
        <g>
          <g transform="translate(35.01530667574961 0.0 ) ">
            <g>
              <line x1="28.753069829816013" y1="0.0" x2="28.753069829816013" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="86.84007958701841" y1="0.0" x2="86.84007958701841" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="144.92708934422262" y1="0.0" x2="144.92708934422262" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="203.01409910142502" y1="0.0" x2="203.01409910142502" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="261.10110885862923" y1="0.0" x2="261.10110885862923" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="319.1881186158316" y1="0.0" x2="319.1881186158316" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
            </g>
          </g>
          <g transform="translate(35.01530667574961 0.0 ) ">
            <g>
              <line x1="0.0" y1="306.40909090909093" x2="376.9846933242504" y2="306.40909090909093" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="262.1942148760331" x2="376.9846933242504" y2="262.1942148760331" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="217.9793388429752" x2="376.9846933242504" y2="217.9793388429752" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="173.76446280991738" x2="376.9846933242504" y2="173.76446280991738" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="129.5495867768595" x2="376.9846933242504" y2="129.5495867768595" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="85.33471074380168" x2="376.9846933242504" y2="85.33471074380168" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="41.119834710743845" x2="376.9846933242504" y2="41.119834710743845" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
            </g>
          </g>
        </g>
        <g clip-path="url(#cp4JFH8)" clip-bounds-jfx="[rect (35.01530667574961, 0.0), (376.9846933242504, 321.0)]">
          <g transform="translate(35.01530667574961 0.0 ) ">
            <g>
              <g>
                <g>
                  <path d="M17.13566787837408 251.1404958677686 L17.13566787837408 251.1404958677686 L22.944368854094137 231.24380165289259 L28.753069829816013 222.40082644628103 L34.56177080553607 222.40082644628103 L40.37047178125613 290.93388429752065 L46.179172756976186 271.03719008264466 L51.987873732696244 282.0909090909091 L57.7965747084163 306.40909090909093 L63.60527568413636 248.92975206611573 L69.41397665985824 275.4586776859504 L75.2226776355783 271.03719008264466 L81.03137861129835 271.03719008264466 L86.84007958701841 257.7727272727273 L92.64878056273847 293.1446280991736 L98.45748153845852 284.301652892562 L104.2661825141804 226.8223140495868 L110.07488348990046 301.9876033057851 L115.88358446562052 279.8801652892562 L121.69228544134057 306.40909090909093 L127.50098641706063 213.55785123966945 L133.3096873927807 293.1446280991736 L139.11838836850075 246.71900826446281 L144.92708934422262 220.19008264462812 L150.73579031994268 200.2933884297521 L156.54449129566274 259.9834710743802 L162.3531922713828 237.87603305785126 L168.16189324710285 242.29752066115705 L173.9705942228229 262.1942148760331 L179.77929519854297 231.24380165289259 L185.58799617426484 226.8223140495868 L191.3966971499849 173.76446280991738 L197.20539812570496 209.13636363636365 L203.01409910142502 156.07851239669424 L208.82280007714508 158.28925619834715 L214.63150105286513 253.3512396694215 L220.440202028587 213.55785123966945 L226.24890300430707 171.5537190082645 L232.05760398002712 151.65702479338847 L237.86630495574718 206.92561983471077 L243.67500593146724 153.86776859504135 L249.4837069071873 103.02066115702485 L255.29240788290736 187.02892561983472 L261.10110885862923 164.92148760330582 L266.9098098343493 149.44628099173556 L272.71851081006935 111.86363636363637 L278.5272117857894 142.8140495867769 L284.33591276150946 160.50000000000003 L290.1446137372295 89.75619834710747 L295.9533147129514 85.33471074380168 L301.76201568867145 118.49586776859508 L307.5707166643915 127.33884297520666 L313.37941764011157 116.28512396694217 L319.1881186158316 78.70247933884303 L324.9968195915517 94.17768595041326 L330.80552056727174 56.595041322314074 L336.6142215429936 91.96694214876035 L342.4229225187137 85.33471074380168 L348.23162349443373 27.85537190082647 L354.0403244701538 14.590909090909122 L359.84902544587385 56.595041322314074 " fill="none" stroke-width="2.2" stroke="rgb(71,71,71)" stroke-opacity="1.0">
                  </path>
                </g>
              </g>
            </g>
          </g>
          <defs>
            <clippath id="cp4JFH8">
              <rect x="35.01530667574961" y="0.0" width="376.9846933242504" height="321.0">
              </rect>
            </clippath>
          </defs>
        </g>
        <g>
          <g transform="translate(35.01530667574961 321.0 ) ">
            <g transform="translate(28.753069829816013 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>1960</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(86.84007958701841 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>1970</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(144.92708934422262 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>1980</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(203.01409910142502 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>1990</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(261.10110885862923 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>2000</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(319.1881186158316 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>2010</tspan>
                </text>
              </g>
            </g>
            <line x1="0.0" y1="0.0" x2="376.9846933242504" y2="0.0" stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0">
            </line>
          </g>
          <g transform="translate(35.01530667574961 0.0 ) ">
            <g transform="translate(0.0 306.40909090909093 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>-0.2</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 262.1942148760331 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>0.0</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 217.9793388429752 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>0.2</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 173.76446280991738 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>0.4</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 129.5495867768595 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>0.6</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 85.33471074380168 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>0.8</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 41.119834710743845 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>1.0</tspan>
                </text>
              </g>
            </g>
          </g>
        </g>
      </g>
      <g transform="translate(64.51530667574961 16.8 ) ">
        <text class="plot-title" y="0.0">
          <tspan>June temperature anomalies</tspan>
        </text>
      </g>
      <g transform="translate(16.0 187.0 ) rotate(-90.0 ) ">
        <text class="axis-title-y" y="0.0" text-anchor="middle">
          <tspan>Jun</tspan>
        </text>
      </g>
      <g transform="translate(253.00765333787479 393.0 ) ">
        <text class="axis-title-x" y="0.0" text-anchor="middle">
          <tspan>Year</tspan>
        </text>
      </g>
      <path fill="rgb(0,0,0)" fill-opacity="0.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" stroke-width="0.0" d="M0.0 0.0 L0.0 400.0 L448.0 400.0 L448.0 0.0 Z" pointer-events="none">
      </path>
    </g>
    <g id="duRJqFb">
    </g>
  </svg>
  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" display="block" class="plt-container" width="448.0" height="400.0" x="452.0" y="0.0">
    <style type="text/css">
    .plt-container {
   font-family: Lucida Grande, sans-serif;
   user-select: none;
   -webkit-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
}
text {
   text-rendering: optimizeLegibility;
}
#pxlidIQ .plot-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 16.0px;

}
#pxlidIQ .plot-subtitle {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pxlidIQ .plot-caption {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pxlidIQ .hyperlink-element {
fill: #118ed8;
font-weight: normal;
   font-style: normal;
}
#pxlidIQ .legend-title {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pxlidIQ .legend-item {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pxlidIQ .axis-title-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pxlidIQ .axis-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFUexjY .axis-tooltip-text-x {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pxlidIQ .axis-title-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 15.0px;

}
#pxlidIQ .axis-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFUexjY .axis-tooltip-text-y {
fill: #ffffff;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pxlidIQ .facet-strip-text-x {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#pxlidIQ .facet-strip-text-y {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFUexjY .tooltip-text {
fill: #474747;
font-weight: normal;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFUexjY .tooltip-title {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}
#dFUexjY .tooltip-label {
fill: #474747;
font-weight: bold;
   font-style: normal;font-family: Lucida Grande, sans-serif;
font-size: 13.0px;

}

    </style>
    <g id="pxlidIQ">
      <path fill-rule="evenodd" fill="rgb(255,255,255)" fill-opacity="1.0" d="M0.0 0.0 L0.0 400.0 L448.0 400.0 L448.0 0.0 Z">
      </path>
      <g transform="translate(29.5 26.5 ) ">
        <g>
          <g transform="translate(29.941816366404606 0.0 ) ">
            <g>
              <line x1="29.14003095510634" y1="0.0" x2="29.14003095510634" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="88.00878035935784" y1="0.0" x2="88.00878035935784" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="146.87752976360935" y1="0.0" x2="146.87752976360935" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="205.74627916786085" y1="0.0" x2="205.74627916786085" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="264.61502857211417" y1="0.0" x2="264.61502857211417" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="323.4837779763657" y1="0.0" x2="323.4837779763657" y2="321.0" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
            </g>
          </g>
          <g transform="translate(29.941816366404606 0.0 ) ">
            <g>
              <line x1="0.0" y1="290.01659923845796" x2="382.0581836335954" y2="290.01659923845796" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="226.35643741075683" x2="382.0581836335954" y2="226.35643741075683" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="162.6962755830557" x2="382.0581836335954" y2="162.6962755830557" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="99.03611375535456" x2="382.0581836335954" y2="99.03611375535456" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
              <line x1="0.0" y1="35.37595192765343" x2="382.0581836335954" y2="35.37595192765343" stroke="rgb(233,233,233)" stroke-opacity="1.0" stroke-width="1.0" fill="none">
              </line>
            </g>
          </g>
        </g>
        <g clip-path="url(#cNFN44m)" clip-bounds-jfx="[rect (29.941816366404606, 0.0), (382.0581836335954, 321.0)]">
          <g transform="translate(29.941816366404606 0.0 ) ">
            <g>
              <g>
                <g>
                  <path d="M17.366281074255312 306.4090909090909 L17.366281074255312 306.4090909090909 L23.253156014679917 303.0032722513089 L29.14003095510634 298.4197405997144 L35.026905895530945 298.03777962874824 L40.91378083595555 295.5232032365541 L46.80065577638197 292.69032603522123 L52.68753071680658 291.00333174678724 L58.57440565723118 291.1306520704427 L64.4612805976576 285.17842693955265 L70.34815553808221 283.8415635411709 L76.23503047850681 279.83097334602576 L82.12190541893324 275.279271775345 L88.00878035935784 272.4463945740124 L93.89565529978245 269.64534745359356 L99.78253024020887 267.99018324607323 L105.66940518063348 258.3774988100904 L111.55628012105808 258.3774988100904 L117.4431550614845 254.36690861494526 L123.33003000190911 252.93455497382206 L129.2169049423337 246.09108757734407 L135.10377988275832 240.39350309376505 L140.99065482318474 236.41474297953368 L146.87752976360935 230.0487267967635 L152.76440470403395 226.13362684435992 L158.65127964446037 222.05937648738677 L164.53815458488498 216.32996192289397 L170.42502952530958 212.00107091861014 L176.311904465736 207.44936934792963 L182.1987794061606 202.42021656354132 L188.08565434658522 197.0727629700143 L193.97252928701164 190.16563541170876 L199.85940422743624 185.07282246549244 L205.74627916786085 181.88981437410757 L211.63315410828727 176.06490956687276 L217.52002904871188 172.3407900999523 L223.40690398913648 171.86333888624472 L229.2937789295629 167.66176820561645 L235.1806538699875 160.0225487862922 L241.0675288104121 154.13398381722982 L246.95440375083854 151.84221799143256 L252.84127869126314 141.05182056163721 L258.72815363168775 136.81841980009517 L264.61502857211417 132.45769871489756 L270.5019035125388 127.71501665873393 L276.3887784529634 120.36226796763435 L282.2756533933898 111.67265587815336 L288.1625283338144 107.34376487386953 L294.049403274239 99.41807472632081 L299.9362782146636 93.46584959543065 L305.82315315509004 86.81336268443602 L311.71002809551464 81.65688957639213 L317.59690303593925 75.99113517372666 L323.4837779763657 67.55616373155635 L329.3706529167903 62.6225011899096 L335.2575278572149 56.22465492622564 L341.1444027976413 47.21674202760596 L347.0312777380659 38.71811042360787 L352.9181526784905 33.816277962874665 L358.80502761891694 21.05241551642075 L364.69190255934154 14.590909090909008 " fill="none" stroke-width="2.2" stroke="rgb(71,71,71)" stroke-opacity="1.0">
                  </path>
                </g>
              </g>
            </g>
          </g>
          <defs>
            <clippath id="cNFN44m">
              <rect x="29.941816366404606" y="0.0" width="382.0581836335954" height="321.0">
              </rect>
            </clippath>
          </defs>
        </g>
        <g>
          <g transform="translate(29.941816366404606 321.0 ) ">
            <g transform="translate(29.14003095510634 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>1960</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(88.00878035935784 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>1970</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(146.87752976360935 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>1980</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(205.74627916786085 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>1990</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(264.61502857211417 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>2000</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(323.4837779763657 0.0 ) ">
              <line stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" x2="0.0" y2="4.0">
              </line>
              <g transform="translate(0.0 7.0 ) ">
                <text class="axis-text-x" text-anchor="middle" dy="0.7em">
                  <tspan>2010</tspan>
                </text>
              </g>
            </g>
            <line x1="0.0" y1="0.0" x2="382.0581836335954" y2="0.0" stroke-width="1.0" stroke="rgb(71,71,71)" stroke-opacity="1.0">
            </line>
          </g>
          <g transform="translate(29.941816366404606 0.0 ) ">
            <g transform="translate(0.0 290.01659923845796 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>320</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 226.35643741075683 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>340</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 162.6962755830557 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>360</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 99.03611375535456 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>380</tspan>
                </text>
              </g>
            </g>
            <g transform="translate(0.0 35.37595192765343 ) ">
              <g transform="translate(-3.0 0.0 ) ">
                <text class="axis-text-y" text-anchor="end" dy="0.35em">
                  <tspan>400</tspan>
                </text>
              </g>
            </g>
          </g>
        </g>
      </g>
      <g transform="translate(59.44181636640461 16.8 ) ">
        <text class="plot-title" y="0.0">
          <tspan>Carbon dioxide emissions</tspan>
        </text>
      </g>
      <g transform="translate(16.0 187.0 ) rotate(-90.0 ) ">
        <text class="axis-title-y" y="0.0" text-anchor="middle">
          <tspan>Trend</tspan>
        </text>
      </g>
      <g transform="translate(250.4709081832023 393.0 ) ">
        <text class="axis-title-x" y="0.0" text-anchor="middle">
          <tspan>Year</tspan>
        </text>
      </g>
      <path fill="rgb(0,0,0)" fill-opacity="0.0" stroke="rgb(71,71,71)" stroke-opacity="1.0" stroke-width="0.0" d="M0.0 0.0 L0.0 400.0 L448.0 400.0 L448.0 0.0 Z" pointer-events="none">
      </path>
    </g>
    <g id="dFUexjY">
    </g>
  </svg>
</svg>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-1" href="labs/Practice/Practice1-Climate-change-preview.html#cell-0">Source: Create a variable that has years 1951 to 1980, and months Jan to Dec (inclusive)</a></div>
</section>
<section id="practice2-collecting-and-analysing-data-from-experiments" class="level1">
<h1>Practice2-Collecting-and-analysing-data-from-experiments</h1>
<div class="quarto-embed-nb-cell">
<div id="cell-0" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> mpl</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lets_plot <span class="im">import</span> <span class="op">*</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>LetsPlot.setup_html(no_js<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-1" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>plt.style.use(</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/aeturrell/core_python/main/plot_style.txt"</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-2" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>data_np <span class="op">=</span> pd.read_excel(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"data/doing-economics-datafile-working-in-excel-project-2.xlsx"</span>,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    usecols<span class="op">=</span><span class="st">"A:Q"</span>,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    index_col<span class="op">=</span><span class="st">"Period"</span>,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>data_n <span class="op">=</span> data_np.iloc[:<span class="dv">10</span>, :].copy()</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>data_p <span class="op">=</span> data_np.iloc[<span class="dv">14</span>:<span class="dv">24</span>, :].copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-3" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>test_data <span class="op">=</span> {</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"City A"</span>: [<span class="fl">14.1</span>, <span class="fl">14.1</span>, <span class="fl">13.7</span>],</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"City B"</span>: [<span class="fl">11.0</span>, <span class="fl">12.6</span>, <span class="fl">12.1</span>],</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Original dataframe</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>test_df <span class="op">=</span> pd.DataFrame.from_dict(test_data)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co"># A copy of the dataframe</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>test_copy <span class="op">=</span> test_df.copy()</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co"># A pointer to the dataframe</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>test_pointer <span class="op">=</span> test_df</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>test_pointer.iloc[<span class="dv">1</span>, <span class="dv">1</span>] <span class="op">=</span> <span class="dv">99</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-4" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"test_df="</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>test_df<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"test_copy="</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>test_copy<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>test_df=
   City A  City B
0    14.1    11.0
1    14.1    99.0
2    13.7    12.1

test_copy=
   City A  City B
0    14.1    11.0
1    14.1    12.6
2    13.7    12.1
</code></pre>
</div>
</div>
<div id="cell-5" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>data_n.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 10 entries, 1 to 10
Data columns (total 16 columns):
 #   Column           Non-Null Count  Dtype 
---  ------           --------------  ----- 
 0   Copenhagen       10 non-null     object
 1   Dnipropetrovs’k  10 non-null     object
 2   Minsk            10 non-null     object
 3   St. Gallen       10 non-null     object
 4   Muscat           10 non-null     object
 5   Samara           10 non-null     object
 6   Zurich           10 non-null     object
 7   Boston           10 non-null     object
 8   Bonn             10 non-null     object
 9   Chengdu          10 non-null     object
 10  Seoul            10 non-null     object
 11  Riyadh           10 non-null     object
 12  Nottingham       10 non-null     object
 13  Athens           10 non-null     object
 14  Istanbul         10 non-null     object
 15  Melbourne        10 non-null     object
dtypes: object(16)
memory usage: 1.3+ KB</code></pre>
</div>
</div>
<div id="cell-6" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>data_n <span class="op">=</span> data_n.astype(<span class="st">"double"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>data_p <span class="op">=</span> data_p.astype(<span class="st">"double"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-7" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>mean_n_c <span class="op">=</span> data_n.mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>mean_p_c <span class="op">=</span> data_p.agg(np.mean, axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-8" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>mean_n_c.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"Without punishment"</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>mean_p_c.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"With punishment"</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Average contributions to the public goods game"</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Average contribution"</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>ax.legend()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Collecting-and-analysing-data-from-experiments-cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>partial_names_list <span class="op">=</span> [<span class="st">"F. Kennedy"</span>, <span class="st">"Lennon"</span>, <span class="st">"Maynard Keynes"</span>, <span class="st">"Wayne"</span>]</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>[<span class="st">"John "</span> <span class="op">+</span> name <span class="cf">for</span> name <span class="kw">in</span> partial_names_list]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>['John F. Kennedy', 'John Lennon', 'John Maynard Keynes', 'John Wayne']</code></pre>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new dataframe with bars in</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>compare_grps <span class="op">=</span> pd.DataFrame(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    [mean_n_c.loc[[<span class="dv">1</span>, <span class="dv">10</span>]], mean_p_c.loc[[<span class="dv">1</span>, <span class="dv">10</span>]]],</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span>[<span class="st">"Without punishment"</span>, <span class="st">"With punishment"</span>],</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns to have 'round' in them</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>compare_grps.columns <span class="op">=</span> [<span class="st">"Round "</span> <span class="op">+</span> <span class="bu">str</span>(i) <span class="cf">for</span> i <span class="kw">in</span> compare_grps.columns]</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Swap the column and index variables around with the transpose function, ready for plotting (.T is transpose)</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>compare_grps <span class="op">=</span> compare_grps.T</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a bar chart</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>compare_grps.plot.bar(rot<span class="op">=</span><span class="dv">0</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Collecting-and-analysing-data-from-experiments-cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-11" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>n_c <span class="op">=</span> data_n.agg([<span class="st">"std"</span>, <span class="st">"var"</span>, <span class="st">"mean"</span>], <span class="dv">1</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>n_c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">var</th>
<th data-quarto-table-cell-role="th">mean</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Period</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>2.020724</td>
<td>4.083325</td>
<td>10.578313</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>2.238129</td>
<td>5.009220</td>
<td>10.628398</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>2.329569</td>
<td>5.426891</td>
<td>10.407079</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>2.068213</td>
<td>4.277504</td>
<td>9.813033</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>2.108329</td>
<td>4.445049</td>
<td>9.305433</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>2.240881</td>
<td>5.021549</td>
<td>8.454844</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>2.136614</td>
<td>4.565117</td>
<td>7.837568</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>2.349442</td>
<td>5.519880</td>
<td>7.376388</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>2.413845</td>
<td>5.826645</td>
<td>6.392985</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>2.187126</td>
<td>4.783520</td>
<td>4.383769</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-12" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>p_c <span class="op">=</span> data_p.agg([<span class="st">"std"</span>, <span class="st">"var"</span>, <span class="st">"mean"</span>], <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-13" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>n_c[<span class="st">"mean"</span>].plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"mean"</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co"># mean + 2 standard deviations</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>(n_c[<span class="st">"mean"</span>] <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> n_c[<span class="st">"std"</span>]).plot(ax<span class="op">=</span>ax, ylim<span class="op">=</span>(<span class="dv">0</span>, <span class="va">None</span>), color<span class="op">=</span><span class="st">"red"</span>, label<span class="op">=</span><span class="st">"±2 s.d."</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co"># mean - 2 standard deviations</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>(n_c[<span class="st">"mean"</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> n_c[<span class="st">"std"</span>]).plot(ax<span class="op">=</span>ax, ylim<span class="op">=</span>(<span class="dv">0</span>, <span class="va">None</span>), color<span class="op">=</span><span class="st">"red"</span>, label<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(data_n.columns)):</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    ax.scatter(x<span class="op">=</span>data_n.index, y<span class="op">=</span>data_n.iloc[:, i], color<span class="op">=</span><span class="st">"k"</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Average contribution"</span>)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Contribution to public goods game without punishment"</span>)</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Collecting-and-analysing-data-from-experiments-cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-14" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>p_c[<span class="st">"mean"</span>].plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"mean"</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># mean + 2 sd</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>(p_c[<span class="st">"mean"</span>] <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> p_c[<span class="st">"std"</span>]).plot(ax<span class="op">=</span>ax, ylim<span class="op">=</span>(<span class="dv">0</span>, <span class="va">None</span>), color<span class="op">=</span><span class="st">"red"</span>, label<span class="op">=</span><span class="st">"±2 s.d."</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># mean - 2 sd</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>(p_c[<span class="st">"mean"</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> p_c[<span class="st">"std"</span>]).plot(ax<span class="op">=</span>ax, ylim<span class="op">=</span>(<span class="dv">0</span>, <span class="va">None</span>), color<span class="op">=</span><span class="st">"red"</span>, label<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(data_p.columns)):</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    ax.scatter(x<span class="op">=</span>data_p.index, y<span class="op">=</span>data_p.iloc[:, i], color<span class="op">=</span><span class="st">"k"</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Average contribution"</span>)</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Contribution to public goods game with punishment"</span>)</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Collecting-and-analysing-data-from-experiments-cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-15" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>data_p.<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.<span class="bu">max</span>() <span class="op">-</span> x.<span class="bu">min</span>(), axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>Period
1     10.199675
2     12.185065
3     12.689935
4     12.625000
5     12.140375
6     12.827541
7     13.098931
8     13.482621
9     13.496754
10    11.307360
dtype: float64</code></pre>
</div>
</div>
<div id="cell-16" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A lambda function accepting three inputs, a, b, and c, and calculating the sum of the squares</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>test_function <span class="op">=</span> <span class="kw">lambda</span> a, b, c: a<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> b<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> c<span class="op">**</span><span class="dv">2</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we apply the function by handing over (in parenthesis) the following inputs: a=3, b=4 and c=5</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>test_function(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>50</code></pre>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>range_function <span class="op">=</span> <span class="kw">lambda</span> x: x.<span class="bu">max</span>() <span class="op">-</span> x.<span class="bu">min</span>()</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>range_p <span class="op">=</span> data_p.<span class="bu">apply</span>(range_function, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>range_n <span class="op">=</span> data_n.<span class="bu">apply</span>(range_function, axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-18" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>range_p.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"With punishment"</span>)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>range_n.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"Without punishment"</span>)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">0</span>, <span class="va">None</span>)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Range of contributions to the public goods game"</span>)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Collecting-and-analysing-data-from-experiments-cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-19" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>funcs_to_apply <span class="op">=</span> [range_function, <span class="st">"max"</span>, <span class="st">"min"</span>, <span class="st">"std"</span>, <span class="st">"mean"</span>]</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>summ_p <span class="op">=</span> data_p.<span class="bu">apply</span>(funcs_to_apply, axis<span class="op">=</span><span class="dv">1</span>).rename(columns<span class="op">=</span>{<span class="st">"&lt;lambda&gt;"</span>: <span class="st">"range"</span>})</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>summ_n <span class="op">=</span> data_n.<span class="bu">apply</span>(funcs_to_apply, axis<span class="op">=</span><span class="dv">1</span>).rename(columns<span class="op">=</span>{<span class="st">"&lt;lambda&gt;"</span>: <span class="st">"range"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-20" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>summ_n.loc[[<span class="dv">1</span>, <span class="dv">10</span>], :].<span class="bu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">range</th>
<th data-quarto-table-cell-role="th">max</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">mean</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Period</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>6.14</td>
<td>14.10</td>
<td>7.96</td>
<td>2.02</td>
<td>10.58</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>7.38</td>
<td>8.68</td>
<td>1.30</td>
<td>2.19</td>
<td>4.38</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-21" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>summ_p.loc[[<span class="dv">1</span>, <span class="dv">10</span>], :].<span class="bu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">range</th>
<th data-quarto-table-cell-role="th">max</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">mean</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Period</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>10.20</td>
<td>16.02</td>
<td>5.82</td>
<td>3.21</td>
<td>10.64</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>11.31</td>
<td>17.51</td>
<td>6.20</td>
<td>3.90</td>
<td>12.87</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-22" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>pip install pingouin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Collecting pingouin
  Downloading pingouin-0.5.5-py3-none-any.whl.metadata (19 kB)
Requirement already satisfied: matplotlib in c:\users\hp\anaconda3\lib\site-packages (from pingouin) (3.9.2)
Requirement already satisfied: numpy in c:\users\hp\anaconda3\lib\site-packages (from pingouin) (1.26.4)
Requirement already satisfied: pandas&gt;=1.5 in c:\users\hp\anaconda3\lib\site-packages (from pingouin) (2.2.2)
Collecting pandas-flavor (from pingouin)
  Downloading pandas_flavor-0.6.0-py3-none-any.whl.metadata (6.3 kB)
Requirement already satisfied: scikit-learn&gt;=1.2 in c:\users\hp\anaconda3\lib\site-packages (from pingouin) (1.5.1)
Requirement already satisfied: scipy in c:\users\hp\anaconda3\lib\site-packages (from pingouin) (1.13.1)
Requirement already satisfied: seaborn in c:\users\hp\anaconda3\lib\site-packages (from pingouin) (0.13.2)
Requirement already satisfied: statsmodels in c:\users\hp\anaconda3\lib\site-packages (from pingouin) (0.14.2)
Requirement already satisfied: tabulate in c:\users\hp\anaconda3\lib\site-packages (from pingouin) (0.9.0)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in c:\users\hp\anaconda3\lib\site-packages (from pandas&gt;=1.5-&gt;pingouin) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in c:\users\hp\anaconda3\lib\site-packages (from pandas&gt;=1.5-&gt;pingouin) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in c:\users\hp\anaconda3\lib\site-packages (from pandas&gt;=1.5-&gt;pingouin) (2023.3)
Requirement already satisfied: joblib&gt;=1.2.0 in c:\users\hp\anaconda3\lib\site-packages (from scikit-learn&gt;=1.2-&gt;pingouin) (1.4.2)
Requirement already satisfied: threadpoolctl&gt;=3.1.0 in c:\users\hp\anaconda3\lib\site-packages (from scikit-learn&gt;=1.2-&gt;pingouin) (3.5.0)
Requirement already satisfied: contourpy&gt;=1.0.1 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib-&gt;pingouin) (1.2.0)
Requirement already satisfied: cycler&gt;=0.10 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib-&gt;pingouin) (0.11.0)
Requirement already satisfied: fonttools&gt;=4.22.0 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib-&gt;pingouin) (4.51.0)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib-&gt;pingouin) (1.4.4)
Requirement already satisfied: packaging&gt;=20.0 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib-&gt;pingouin) (24.1)
Requirement already satisfied: pillow&gt;=8 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib-&gt;pingouin) (10.4.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in c:\users\hp\anaconda3\lib\site-packages (from matplotlib-&gt;pingouin) (3.1.2)
Requirement already satisfied: xarray in c:\users\hp\anaconda3\lib\site-packages (from pandas-flavor-&gt;pingouin) (2023.6.0)
Requirement already satisfied: patsy&gt;=0.5.6 in c:\users\hp\anaconda3\lib\site-packages (from statsmodels-&gt;pingouin) (0.5.6)
Requirement already satisfied: six in c:\users\hp\anaconda3\lib\site-packages (from patsy&gt;=0.5.6-&gt;statsmodels-&gt;pingouin) (1.16.0)
Downloading pingouin-0.5.5-py3-none-any.whl (204 kB)
Downloading pandas_flavor-0.6.0-py3-none-any.whl (7.2 kB)
Installing collected packages: pandas-flavor, pingouin
Successfully installed pandas-flavor-0.6.0 pingouin-0.5.5
Note: you may need to restart the kernel to use updated packages.</code></pre>
</div>
</div>
<div id="cell-23" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pingouin <span class="im">as</span> pg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-24" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>pg.ttest(x<span class="op">=</span>data_n.iloc[<span class="dv">0</span>, :], y<span class="op">=</span>data_p.iloc[<span class="dv">0</span>, :])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">dof</th>
<th data-quarto-table-cell-role="th">alternative</th>
<th data-quarto-table-cell-role="th">p-val</th>
<th data-quarto-table-cell-role="th">CI95%</th>
<th data-quarto-table-cell-role="th">cohen-d</th>
<th data-quarto-table-cell-role="th">BF10</th>
<th data-quarto-table-cell-role="th">power</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">T-test</td>
<td>-0.063782</td>
<td>30</td>
<td>two-sided</td>
<td>0.949567</td>
<td>[-2.0, 1.87]</td>
<td>0.02255</td>
<td>0.337</td>
<td>0.050437</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-25" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>pg.ttest(x<span class="op">=</span>data_n.iloc[<span class="dv">0</span>, :], y<span class="op">=</span>data_p.iloc[<span class="dv">0</span>, :], paired<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">dof</th>
<th data-quarto-table-cell-role="th">alternative</th>
<th data-quarto-table-cell-role="th">p-val</th>
<th data-quarto-table-cell-role="th">CI95%</th>
<th data-quarto-table-cell-role="th">cohen-d</th>
<th data-quarto-table-cell-role="th">BF10</th>
<th data-quarto-table-cell-role="th">power</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">T-test</td>
<td>-0.149959</td>
<td>15</td>
<td>two-sided</td>
<td>0.882795</td>
<td>[-0.92, 0.8]</td>
<td>0.02255</td>
<td>0.258</td>
<td>0.05082</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-2" href="labs/Practice/Practice2-Collecting-and-analysing-data-from-experiments-preview.html#cell-0">Source: Original dataframe</a></div>
</section>
<section id="practice2-recreate-the-matplotlib-plots-using-letsplot-library" class="level1">
<h1>Practice2-Recreate-the-matplotlib-plots-using-letsplot-library</h1>
<div class="quarto-embed-nb-cell">
<div id="cell-0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>pip install lets<span class="op">-</span>plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: lets-plot in c:\users\hp\anaconda3\lib\site-packages (4.5.1)
Requirement already satisfied: pypng in c:\users\hp\anaconda3\lib\site-packages (from lets-plot) (0.20220715.0)
Requirement already satisfied: palettable in c:\users\hp\anaconda3\lib\site-packages (from lets-plot) (3.3.3)
Note: you may need to restart the kernel to use updated packages.</code></pre>
</div>
</div>
<div id="cell-1" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lets_plot <span class="im">import</span> <span class="op">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-2" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>LetsPlot.setup_html()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

            <div id="c0v2XI"></div>
            <script type="text/javascript" data-lets-plot-script="library">
                if(!window.letsPlotCallQueue) {
                    window.letsPlotCallQueue = [];
                }; 
                window.letsPlotCall = function(f) {
                    window.letsPlotCallQueue.push(f);
                };
                (function() {
                    var script = document.createElement("script");
                    script.type = "text/javascript";
                    script.src = "https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.5.1/js-package/distr/lets-plot.min.js";
                    script.onload = function() {
                        window.letsPlotCall = function(f) {f();};
                        window.letsPlotCallQueue.forEach(function(f) {f();});
                        window.letsPlotCallQueue = [];
                        
                    };
                    script.onerror = function(event) {
                        window.letsPlotCall = function(f) {};    // noop
                        window.letsPlotCallQueue = [];
                        var div = document.createElement("div");
                        div.style.color = 'darkred';
                        div.textContent = 'Error loading Lets-Plot JS';
                        document.getElementById("c0v2XI").appendChild(div);
                    };
                    var e = document.getElementById("c0v2XI");
                    e.appendChild(script);
                })()
            </script>
            
</div>
</div>
<div id="cell-3" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y)</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Recreate-the-matplotlib-plots-using-letsplot-library-cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-4" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lets_plot <span class="im">import</span> <span class="op">*</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'x'</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>],</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'y'</span>: [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>ggplot(df, aes(x<span class="op">=</span><span class="st">'x'</span>, y<span class="op">=</span><span class="st">'y'</span>)) <span class="op">+</span> geom_line()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
   <div id="LmAouy"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   var containerDiv = document.getElementById("LmAouy");
   var observer = new ResizeObserver(function(entries) {
       for (let entry of entries) {
           var width = containerDiv.clientWidth
           if (entry.contentBoxSize && width > 0) {
           
               // Render plot
               if (observer) {
                   observer.disconnect();
                   observer = null;
               }

               var plotSpec={
"data":{
"x":[1.0,2.0,3.0,4.0,5.0],
"y":[2.0,4.0,1.0,3.0,5.0]
},
"mapping":{
"x":"x",
"y":"y"
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"x"
},{
"type":"int",
"column":"y"
}]
},
"kind":"plot",
"scales":[],
"layers":[{
"geom":"line",
"mapping":{
},
"data_meta":{
},
"data":{
}
}],
"metainfo_list":[],
"spec_id":"1"
};
               window.letsPlotCall(function() {
       
               var toolbar = null;
               var plotContainer = containerDiv;               
               
                   var options = {
                       sizing: {
                           width_mode: "min",
                           height_mode: "scaled",
                           width: width
                       }
                   };
                   var fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer, options);
                   if (toolbar) {
                     toolbar.bind(fig);
                   }
               });
               
               break;
           }
       }
   });
   
   observer.observe(containerDiv);
   
   // ----------
   })();
   
   </script>
</div>
</div>
<div id="cell-5" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(x, y)</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Recreate-the-matplotlib-plots-using-letsplot-library-cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-6" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lets_plot <span class="im">import</span> <span class="op">*</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'x'</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>],</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'y'</span>: [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>ggplot(df, aes(x<span class="op">=</span><span class="st">'x'</span>, y<span class="op">=</span><span class="st">'y'</span>)) <span class="op">+</span> geom_bar(stat<span class="op">=</span><span class="st">'identity'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
   <div id="oldtWA"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   var containerDiv = document.getElementById("oldtWA");
   var observer = new ResizeObserver(function(entries) {
       for (let entry of entries) {
           var width = containerDiv.clientWidth
           if (entry.contentBoxSize && width > 0) {
           
               // Render plot
               if (observer) {
                   observer.disconnect();
                   observer = null;
               }

               var plotSpec={
"data":{
"x":[1.0,2.0,3.0,4.0,5.0],
"y":[2.0,4.0,1.0,3.0,5.0]
},
"mapping":{
"x":"x",
"y":"y"
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"x"
},{
"type":"int",
"column":"y"
}]
},
"kind":"plot",
"scales":[],
"layers":[{
"geom":"bar",
"stat":"identity",
"mapping":{
},
"data_meta":{
},
"data":{
}
}],
"metainfo_list":[],
"spec_id":"3"
};
               window.letsPlotCall(function() {
       
               var toolbar = null;
               var plotContainer = containerDiv;               
               
                   var options = {
                       sizing: {
                           width_mode: "min",
                           height_mode: "scaled",
                           width: width
                       }
                   };
                   var fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer, options);
                   if (toolbar) {
                     toolbar.bind(fig);
                   }
               });
               
               break;
           }
       }
   });
   
   observer.observe(containerDiv);
   
   // ----------
   })();
   
   </script>
</div>
</div>
<div id="cell-7" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>plt.bar(x, y)</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Recreate-the-matplotlib-plots-using-letsplot-library-cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-8" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>plt.hist(x, bins<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Recreate-the-matplotlib-plots-using-letsplot-library-cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>plt.boxplot(x)</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice2-Recreate-the-matplotlib-plots-using-letsplot-library-cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-3" href="labs/Practice/Practice2-Recreate-the-matplotlib-plots-using-letsplot-library-preview.html#cell-0">Source: Practice2-Recreate-the-matplotlib-plots-using-letsplot-library.ipynb</a></div>
</section>
<section id="practice3-douban-top250-visualizations" class="level1">
<h1>Practice3-DouBan-top250-visualizations</h1>
<div class="quarto-embed-nb-cell">
<div id="cell-0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>pip install requests beautifulsoup4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: requests in c:\users\hp\anaconda3\lib\site-packages (2.32.3)
Requirement already satisfied: beautifulsoup4 in c:\users\hp\anaconda3\lib\site-packages (4.12.3)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in c:\users\hp\anaconda3\lib\site-packages (from requests) (3.3.2)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in c:\users\hp\anaconda3\lib\site-packages (from requests) (3.7)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in c:\users\hp\anaconda3\lib\site-packages (from requests) (2.2.3)
Requirement already satisfied: certifi&gt;=2017.4.17 in c:\users\hp\anaconda3\lib\site-packages (from requests) (2024.8.30)
Requirement already satisfied: soupsieve&gt;1.2 in c:\users\hp\anaconda3\lib\site-packages (from beautifulsoup4) (2.5)
Note: you may need to restart the kernel to use updated packages.</code></pre>
</div>
</div>
<div id="cell-1" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 定义请求的 URL 和 headers</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://movie.douban.com/top250"</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"User-Agent"</span>: <span class="st">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 发送 GET 请求</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url, headers<span class="op">=</span>headers)</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>response.encoding <span class="op">=</span> <span class="st">'utf-8'</span>  <span class="co"># 设置编码方式</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>html_content <span class="op">=</span> response.text  <span class="co"># 获取网页的 HTML 内容</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"网页内容加载成功！"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>网页内容加载成功！</code></pre>
</div>
</div>
<div id="cell-2" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 Beautiful Soup 解析 HTML</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html_content, <span class="st">'html.parser'</span>)</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取电影名称、描述、评分和评价人数</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>movies <span class="op">=</span> []</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> soup.find_all(<span class="st">'div'</span>, class_<span class="op">=</span><span class="st">'item'</span>):</span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> item.find(<span class="st">'span'</span>, class_<span class="op">=</span><span class="st">'title'</span>).get_text()  <span class="co"># 电影名称</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>    description <span class="op">=</span> item.find(<span class="st">'span'</span>, class_<span class="op">=</span><span class="st">'inq'</span>)  <span class="co"># 电影描述</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>    rating <span class="op">=</span> item.find(<span class="st">'span'</span>, class_<span class="op">=</span><span class="st">'rating_num'</span>).get_text()  <span class="co"># 评分</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>    votes <span class="op">=</span> item.find(<span class="st">'div'</span>, class_<span class="op">=</span><span class="st">'star'</span>).find_all(<span class="st">'span'</span>)[<span class="dv">3</span>].get_text()  <span class="co"># 评价人数</span></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 如果没有描述，将其置为空字符串</span></span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> description:</span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a>        description <span class="op">=</span> description.get_text()</span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a>        description <span class="op">=</span> <span class="st">''</span></span>
<span id="cb85-19"><a href="#cb85-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb85-20"><a href="#cb85-20" aria-hidden="true" tabindex="-1"></a>    movie <span class="op">=</span> {</span>
<span id="cb85-21"><a href="#cb85-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"title"</span>: title,</span>
<span id="cb85-22"><a href="#cb85-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">"description"</span>: description,</span>
<span id="cb85-23"><a href="#cb85-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"rating"</span>: rating,</span>
<span id="cb85-24"><a href="#cb85-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"votes"</span>: votes.replace(<span class="st">'人评价'</span>, <span class="st">''</span>).strip()</span>
<span id="cb85-25"><a href="#cb85-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb85-26"><a href="#cb85-26" aria-hidden="true" tabindex="-1"></a>    movies.append(movie)</span>
<span id="cb85-27"><a href="#cb85-27" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb85-28"><a href="#cb85-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"数据提取成功！"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>数据提取成功！</code></pre>
</div>
</div>
<div id="cell-3" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 将数据保存到 CSV 文件</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'douban_top250.csv'</span>, <span class="st">'w'</span>, newline<span class="op">=</span><span class="st">''</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> csvfile:</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    fieldnames <span class="op">=</span> [<span class="st">'title'</span>, <span class="st">'description'</span>, <span class="st">'rating'</span>, <span class="st">'votes'</span>]</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>    writer <span class="op">=</span> csv.DictWriter(csvfile, fieldnames<span class="op">=</span>fieldnames)</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>    writer.writeheader()  <span class="co"># 写入表头</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> movie <span class="kw">in</span> movies:</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>        writer.writerow(movie)  <span class="co"># 写入每一行数据</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"数据已成功保存到 douban_top250.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>数据已成功保存到 douban_top250.csv</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-4" href="labs/Practice/Practice3-DouBan-top250-visualizations-preview.html#cell-0">Source: 定义请求的 URL 和 headers</a></div>
</section>
<section id="practice3-extracting-data" class="level1">
<h1>Practice3-Extracting-data</h1>
<div class="quarto-embed-nb-cell">
<div id="cell-0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> textwrap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-1" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>pd.read_csv(</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://vincentarelbundock.github.io/Rdatasets/csv/dplyr/storms.csv"</span>, nrows<span class="op">=</span><span class="dv">10</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">rownames</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">day</th>
<th data-quarto-table-cell-role="th">hour</th>
<th data-quarto-table-cell-role="th">lat</th>
<th data-quarto-table-cell-role="th">long</th>
<th data-quarto-table-cell-role="th">status</th>
<th data-quarto-table-cell-role="th">category</th>
<th data-quarto-table-cell-role="th">wind</th>
<th data-quarto-table-cell-role="th">pressure</th>
<th data-quarto-table-cell-role="th">tropicalstorm_force_diameter</th>
<th data-quarto-table-cell-role="th">hurricane_force_diameter</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>27</td>
<td>0</td>
<td>27.5</td>
<td>-79.0</td>
<td>tropical depression</td>
<td>NaN</td>
<td>25</td>
<td>1013</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>27</td>
<td>6</td>
<td>28.5</td>
<td>-79.0</td>
<td>tropical depression</td>
<td>NaN</td>
<td>25</td>
<td>1013</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>27</td>
<td>12</td>
<td>29.5</td>
<td>-79.0</td>
<td>tropical depression</td>
<td>NaN</td>
<td>25</td>
<td>1013</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>27</td>
<td>18</td>
<td>30.5</td>
<td>-79.0</td>
<td>tropical depression</td>
<td>NaN</td>
<td>25</td>
<td>1013</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>5</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>28</td>
<td>0</td>
<td>31.5</td>
<td>-78.8</td>
<td>tropical depression</td>
<td>NaN</td>
<td>25</td>
<td>1012</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>6</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>28</td>
<td>6</td>
<td>32.4</td>
<td>-78.7</td>
<td>tropical depression</td>
<td>NaN</td>
<td>25</td>
<td>1012</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>7</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>28</td>
<td>12</td>
<td>33.3</td>
<td>-78.0</td>
<td>tropical depression</td>
<td>NaN</td>
<td>25</td>
<td>1011</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>8</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>28</td>
<td>18</td>
<td>34.0</td>
<td>-77.0</td>
<td>tropical depression</td>
<td>NaN</td>
<td>30</td>
<td>1006</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>9</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>29</td>
<td>0</td>
<td>34.4</td>
<td>-75.8</td>
<td>tropical storm</td>
<td>NaN</td>
<td>35</td>
<td>1004</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>10</td>
<td>Amy</td>
<td>1975</td>
<td>6</td>
<td>29</td>
<td>6</td>
<td>34.0</td>
<td>-74.8</td>
<td>tropical storm</td>
<td>NaN</td>
<td>40</td>
<td>1002</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-2" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://api.ons.gov.uk/timeseries/JP9Z/dataset/UNEM/data"</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the data from the ONS API:</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>json_data <span class="op">=</span> requests.get(url).json()</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Prep the data for a quick plot</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> json_data[<span class="st">"description"</span>][<span class="st">"title"</span>]</span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> (</span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>    pd.DataFrame(pd.json_normalize(json_data[<span class="st">"months"</span>]))</span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>        date<span class="op">=</span><span class="kw">lambda</span> x: pd.to_datetime(x[<span class="st">"date"</span>]),</span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>        value<span class="op">=</span><span class="kw">lambda</span> x: pd.to_numeric(x[<span class="st">"value"</span>]),</span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>    .set_index(<span class="st">"date"</span>)</span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"value"</span>].plot(title<span class="op">=</span>title, ylim<span class="op">=</span>(<span class="dv">0</span>, df[<span class="st">"value"</span>].<span class="bu">max</span>() <span class="op">*</span> <span class="fl">1.2</span>), lw<span class="op">=</span><span class="fl">3.0</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">JSONDecodeError</span>                           Traceback (most recent call last)
File <span class="ansi-green-fg ansi-bold">c:\Users\HP\anaconda3\Lib\site-packages\requests\models.py:974</span>, in <span class="ansi-cyan-fg">Response.json</span><span class="ansi-blue-fg ansi-bold">(self, **kwargs)</span>
<span class="ansi-green-fg">    973</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 974</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> complexjson<span style="color:rgb(98,98,98)">.</span>loads(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>text, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)
<span class="ansi-green-fg">    975</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> JSONDecodeError <span style="font-weight:bold;color:rgb(0,135,0)">as</span> e:
<span class="ansi-green-fg">    976</span>     <span style="font-style:italic;color:rgb(95,135,135)"># Catch JSON-related errors and raise as requests.JSONDecodeError</span>
<span class="ansi-green-fg">    977</span>     <span style="font-style:italic;color:rgb(95,135,135)"># This aliases json.JSONDecodeError and simplejson.JSONDecodeError</span>

File <span class="ansi-green-fg ansi-bold">c:\Users\HP\anaconda3\Lib\json\__init__.py:346</span>, in <span class="ansi-cyan-fg">loads</span><span class="ansi-blue-fg ansi-bold">(s, cls, object_hook, parse_float, parse_int, parse_constant, object_pairs_hook, **kw)</span>
<span class="ansi-green-fg">    343</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> (<span style="color:rgb(0,135,0)">cls</span> <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span> object_hook <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span>
<span class="ansi-green-fg">    344</span>         parse_int <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span> parse_float <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span>
<span class="ansi-green-fg">    345</span>         parse_constant <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span> object_pairs_hook <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> kw):
<span class="ansi-green-fg ansi-bold">--&gt; 346</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _default_decoder<span style="color:rgb(98,98,98)">.</span>decode(s)
<span class="ansi-green-fg">    347</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">cls</span> <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:

File <span class="ansi-green-fg ansi-bold">c:\Users\HP\anaconda3\Lib\json\decoder.py:337</span>, in <span class="ansi-cyan-fg">JSONDecoder.decode</span><span class="ansi-blue-fg ansi-bold">(self, s, _w)</span>
<span class="ansi-green-fg">    333</span> <span style="font-style:italic;color:rgb(175,0,0)">"""Return the Python representation of ``s`` (a ``str`` instance</span>
<span class="ansi-green-fg">    334</span> <span style="font-style:italic;color:rgb(175,0,0)">containing a JSON document).</span>
<span class="ansi-green-fg">    335</span> 
<span class="ansi-green-fg">    336</span> <span style="font-style:italic;color:rgb(175,0,0)">"""</span>
<span class="ansi-green-fg ansi-bold">--&gt; 337</span> obj, end <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>raw_decode(s, idx<span style="color:rgb(98,98,98)">=</span>_w(s, <span style="color:rgb(98,98,98)">0</span>)<span style="color:rgb(98,98,98)">.</span>end())
<span class="ansi-green-fg">    338</span> end <span style="color:rgb(98,98,98)">=</span> _w(s, end)<span style="color:rgb(98,98,98)">.</span>end()

File <span class="ansi-green-fg ansi-bold">c:\Users\HP\anaconda3\Lib\json\decoder.py:355</span>, in <span class="ansi-cyan-fg">JSONDecoder.raw_decode</span><span class="ansi-blue-fg ansi-bold">(self, s, idx)</span>
<span class="ansi-green-fg">    354</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">StopIteration</span> <span style="font-weight:bold;color:rgb(0,135,0)">as</span> err:
<span class="ansi-green-fg ansi-bold">--&gt; 355</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> JSONDecodeError(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Expecting value</span><span style="color:rgb(175,0,0)">"</span>, s, err<span style="color:rgb(98,98,98)">.</span>value) <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg">    356</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> obj, end

<span class="ansi-red-fg ansi-bold">JSONDecodeError</span>: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

<span class="ansi-red-fg ansi-bold">JSONDecodeError</span>                           Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[3], line 6</span>
<span class="ansi-green-fg">      3</span> url <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">https://api.ons.gov.uk/timeseries/JP9Z/dataset/UNEM/data</span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">      5</span> <span style="font-style:italic;color:rgb(95,135,135)"># Get the data from the ONS API:</span>
<span class="ansi-green-fg ansi-bold">----&gt; 6</span> json_data <span style="color:rgb(98,98,98)">=</span> requests<span style="color:rgb(98,98,98)">.</span>get(url)<span style="color:rgb(98,98,98)">.</span>json()
<span class="ansi-green-fg">      8</span> <span style="font-style:italic;color:rgb(95,135,135)"># Prep the data for a quick plot</span>
<span class="ansi-green-fg">      9</span> title <span style="color:rgb(98,98,98)">=</span> json_data[<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">description</span><span style="color:rgb(175,0,0)">"</span>][<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">title</span><span style="color:rgb(175,0,0)">"</span>]

File <span class="ansi-green-fg ansi-bold">c:\Users\HP\anaconda3\Lib\site-packages\requests\models.py:978</span>, in <span class="ansi-cyan-fg">Response.json</span><span class="ansi-blue-fg ansi-bold">(self, **kwargs)</span>
<span class="ansi-green-fg">    974</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> complexjson<span style="color:rgb(98,98,98)">.</span>loads(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>text, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)
<span class="ansi-green-fg">    975</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> JSONDecodeError <span style="font-weight:bold;color:rgb(0,135,0)">as</span> e:
<span class="ansi-green-fg">    976</span>     <span style="font-style:italic;color:rgb(95,135,135)"># Catch JSON-related errors and raise as requests.JSONDecodeError</span>
<span class="ansi-green-fg">    977</span>     <span style="font-style:italic;color:rgb(95,135,135)"># This aliases json.JSONDecodeError and simplejson.JSONDecodeError</span>
<span class="ansi-green-fg ansi-bold">--&gt; 978</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> RequestsJSONDecodeError(e<span style="color:rgb(98,98,98)">.</span>msg, e<span style="color:rgb(98,98,98)">.</span>doc, e<span style="color:rgb(98,98,98)">.</span>pos)

<span class="ansi-red-fg ansi-bold">JSONDecodeError</span>: Expecting value: line 1 column 1 (char 0)</pre>
</div>
</div>
</div>
<div id="cell-3" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"http://aeturrell.com/research"</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>page <span class="op">=</span> requests.get(url)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>page.text[:<span class="dv">300</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>'&lt;!DOCTYPE html&gt;\n&lt;html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"&gt;&lt;head&gt;\n\n&lt;meta charset="utf-8"&gt;\n&lt;meta name="generator" content="quarto-1.5.56"&gt;\n\n&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"&gt;\n\n&lt;meta name="author" content="Arthur Turrell"&gt;\n'</code></pre>
</div>
</div>
<div id="cell-4" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(page.text, <span class="st">"html.parser"</span>)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup.prettify()[<span class="dv">60000</span>:<span class="dv">60500</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       &lt;/div&gt;
          &lt;div class="project-category"&gt;
           &lt;a href="#category=gender pay gap"&gt;
            gender pay gap
           &lt;/a&gt;
          &lt;/div&gt;
          &lt;div class="project-category"&gt;
           &lt;a href="#category=labour"&gt;
            labour
           &lt;/a&gt;
          &lt;/div&gt;
          &lt;div class="project-category"&gt;
           &lt;a href="#category=text analysis"&gt;
            text analysis
           &lt;/a&gt;
          &lt;/div&gt;
         &lt;/div&gt;
         &lt;div class="project-details-listing</code></pre>
</div>
</div>
<div id="cell-5" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all paragraphs</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>all_paras <span class="op">=</span> soup.find_all(<span class="st">"p"</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Just show one of the paras</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>all_paras[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>&lt;p&gt;Botta, Federico, Robin Lovelace, Laura Gilbert, and Arthur Turrell. "Packaging code and data for reproducible research: A case study of journey time statistics." &lt;i&gt;Environment and Planning B: Urban Analytics and City Science&lt;/i&gt; (2024): 23998083241267331. doi: &lt;a href="https://doi.org/10.1177/23998083241267331"&gt;&lt;code&gt;10.1177/23998083241267331&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;</code></pre>
</div>
</div>
<div id="cell-6" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>all_paras[<span class="dv">1</span>].text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>'Botta, Federico, Robin Lovelace, Laura Gilbert, and Arthur Turrell. "Packaging code and data for reproducible research: A case study of journey time statistics." Environment and Planning B: Urban Analytics and City Science (2024): 23998083241267331. doi: 10.1177/23998083241267331'</code></pre>
</div>
</div>
<div id="cell-7" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>projects <span class="op">=</span> soup.find_all(<span class="st">"div"</span>, class_<span class="op">=</span><span class="st">"project-content listing-pub-info"</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>projects <span class="op">=</span> [x.text.strip() <span class="cf">for</span> x <span class="kw">in</span> projects]</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>projects[:<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>['Botta, Federico, Robin Lovelace, Laura Gilbert, and Arthur Turrell. "Packaging code and data for reproducible research: A case study of journey time statistics." Environment and Planning B: Urban Analytics and City Science (2024): 23998083241267331. doi: 10.1177/23998083241267331',
 'Kalamara, Eleni, Arthur Turrell, Chris Redl, George Kapetanios, and Sujit Kapadia. "Making text count: economic forecasting using newspaper text." Journal of Applied Econometrics 37, no. 5 (2022): 896-919. doi: 10.1002/jae.2907',
 'Turrell, A., Speigner, B., Copple, D., Djumalieva, J. and Thurgood, J., 2021. Is the UK’s productivity puzzle mostly driven by occupational mismatch? An analysis using big data on job vacancies. Labour Economics, 71, p.102013. doi: 10.1016/j.labeco.2021.102013',
 'Haldane, Andrew G., and Arthur E. Turrell. "Drawing on different disciplines: macroeconomic agent-based models." Journal of Evolutionary Economics 29 (2019): 39-66. doi: 10.1007/s00191-018-0557-5']</code></pre>
</div>
</div>
<div id="cell-8" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>start, stop <span class="op">=</span> <span class="dv">0</span>, <span class="dv">50</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>root_url <span class="op">=</span> <span class="st">"www.codingforeconomists.com/page="</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>info_on_pages <span class="op">=</span> [scraper(root_url <span class="op">+</span> <span class="bu">str</span>(i)) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(start, stop)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[17], line 3</span>
<span class="ansi-green-fg">      1</span> start, stop <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(98,98,98)">0</span>, <span style="color:rgb(98,98,98)">50</span>
<span class="ansi-green-fg">      2</span> root_url <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">www.codingforeconomists.com/page=</span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg ansi-bold">----&gt; 3</span> info_on_pages <span style="color:rgb(98,98,98)">=</span> [scraper(root_url <span style="color:rgb(98,98,98)">+</span> <span style="color:rgb(0,135,0)">str</span>(i)) <span style="font-weight:bold;color:rgb(0,135,0)">for</span> i <span style="font-weight:bold;color:rgb(175,0,255)">in</span> <span style="color:rgb(0,135,0)">range</span>(start, stop)]

<span class="ansi-red-fg ansi-bold">NameError</span>: name 'scraper' is not defined</pre>
</div>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>df_list <span class="op">=</span> pd.read_html(</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://simple.wikipedia.org/wiki/FIFA_World_Cup"</span>, match<span class="op">=</span><span class="st">"Sweden"</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve first and only entry from list of dataframes</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df_list[<span class="dv">0</span>]</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Years</th>
<th data-quarto-table-cell-role="th">Hosts</th>
<th data-quarto-table-cell-role="th">Winners</th>
<th data-quarto-table-cell-role="th">Score</th>
<th data-quarto-table-cell-role="th">Runner's-up</th>
<th data-quarto-table-cell-role="th">Third place</th>
<th data-quarto-table-cell-role="th">Score.1</th>
<th data-quarto-table-cell-role="th">Fourth place</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1930 Details</td>
<td>Uruguay</td>
<td>Uruguay</td>
<td>4 - 2</td>
<td>Argentina</td>
<td>United States</td>
<td>[note 1]</td>
<td>Yugoslavia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1934 Details</td>
<td>Italy</td>
<td>Italy</td>
<td>2 - 1</td>
<td>Czechoslovakia</td>
<td>Germany</td>
<td>3 - 2</td>
<td>Austria</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1938 Details</td>
<td>France</td>
<td>Italy</td>
<td>4 - 2</td>
<td>Hungary</td>
<td>Brazil</td>
<td>4 - 2</td>
<td>Sweden</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1950 Details</td>
<td>Brazil</td>
<td>Uruguay</td>
<td>2 - 1</td>
<td>Brazil</td>
<td>Sweden</td>
<td>[note 2]</td>
<td>Spain</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1954 Details</td>
<td>Switzerland</td>
<td>West Germany</td>
<td>3 - 2</td>
<td>Hungary</td>
<td>Austria</td>
<td>3 - 1</td>
<td>Uruguay</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pdftotext</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the pdf_with_table.pdf file from</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="co"># https://github.com/aeturrell/coding-for-economists/blob/main/data/pdf_with_table.pdf</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="co"># and put it in a subfolder called data before running the next line</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the PDF</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(Path(<span class="st">"data/pdf_with_table.pdf"</span>), <span class="st">"rb"</span>) <span class="im">as</span> f:</span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>    pdf <span class="op">=</span> pdftotext.PDF(f)</span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Read all the text into one string; print a chunk of the string</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join(pdf)[:<span class="dv">220</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ModuleNotFoundError</span>                       Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[19], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> <span style="font-weight:bold;color:rgb(0,135,0)">import</span> <span style="font-weight:bold;color:rgb(0,0,255)">pdftotext</span>
<span class="ansi-green-fg">      2</span> <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,0,255)">pathlib</span> <span style="font-weight:bold;color:rgb(0,135,0)">import</span> Path
<span class="ansi-green-fg">      4</span> <span style="font-style:italic;color:rgb(95,135,135)"># Download the pdf_with_table.pdf file from</span>
<span class="ansi-green-fg">      5</span> <span style="font-style:italic;color:rgb(95,135,135)"># https://github.com/aeturrell/coding-for-economists/blob/main/data/pdf_with_table.pdf</span>
<span class="ansi-green-fg">      6</span> <span style="font-style:italic;color:rgb(95,135,135)"># and put it in a subfolder called data before running the next line</span>
<span class="ansi-green-fg">      7</span> 
<span class="ansi-green-fg">      8</span> <span style="font-style:italic;color:rgb(95,135,135)"># Load the PDF</span>

<span class="ansi-red-fg ansi-bold">ModuleNotFoundError</span>: No module named 'pdftotext'</pre>
</div>
</div>
</div>
<div id="cell-11" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>pip install pdftotext</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Collecting pdftotextNote: you may need to restart the kernel to use updated packages.

  Downloading pdftotext-2.2.2.tar.gz (113 kB)
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'done'
Building wheels for collected packages: pdftotext
  Building wheel for pdftotext (setup.py): started
  Building wheel for pdftotext (setup.py): finished with status 'error'
  Running setup.py clean for pdftotext
Failed to build pdftotext</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-5" href="labs/Practice/Practice3-Extracting-data-preview.html#cell-0">Source: Get the data from the ONS API:</a></div>
</section>
<section id="practice3-scrape-imdb-movie-rating-and-details" class="level1">
<h1>Practice3-scrape-imdb-movie-rating-and-details</h1>
<div class="quarto-embed-nb-cell">
<div id="cell-0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-1" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Downloading imdb top 250 movie's data</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'http://www.imdb.com/chart/top'</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url)</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.text, <span class="st">"html.parser"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-2" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>movies <span class="op">=</span> soup.select(<span class="st">'td.titleColumn'</span>)</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>crew <span class="op">=</span> [a.attrs.get(<span class="st">'title'</span>) <span class="cf">for</span> a <span class="kw">in</span> soup.select(<span class="st">'td.titleColumn a'</span>)]</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>ratings <span class="op">=</span> [b.attrs.get(<span class="st">'data-value'</span>)</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> b <span class="kw">in</span> soup.select(<span class="st">'td.posterColumn span[name=ir]'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-3" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a empty list for storing</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="co"># movie information</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span> <span class="op">=</span> []</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterating over movies to extract</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="co"># each movie's details</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(movies)):</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Separating movie into: 'place',</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 'title', 'year'</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>    movie_string <span class="op">=</span> movies[index].get_text()</span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>    movie <span class="op">=</span> (<span class="st">' '</span>.join(movie_string.split()).replace(<span class="st">'.'</span>, <span class="st">''</span>))</span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a>    movie_title <span class="op">=</span> movie[<span class="bu">len</span>(<span class="bu">str</span>(index))<span class="op">+</span><span class="dv">1</span>:<span class="op">-</span><span class="dv">7</span>]</span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a>    year <span class="op">=</span> re.search(<span class="st">'\((.*?)\)'</span>, movie_string).group(<span class="dv">1</span>)</span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a>    place <span class="op">=</span> movie[:<span class="bu">len</span>(<span class="bu">str</span>(index))<span class="op">-</span>(<span class="bu">len</span>(movie))]</span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> {<span class="st">"place"</span>: place,</span>
<span id="cb110-17"><a href="#cb110-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"movie_title"</span>: movie_title,</span>
<span id="cb110-18"><a href="#cb110-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"rating"</span>: ratings[index],</span>
<span id="cb110-19"><a href="#cb110-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"year"</span>: year,</span>
<span id="cb110-20"><a href="#cb110-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"star_cast"</span>: crew[index],</span>
<span id="cb110-21"><a href="#cb110-21" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb110-22"><a href="#cb110-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">list</span>.append(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-4" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> movie <span class="kw">in</span> <span class="bu">list</span>:</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(movie[<span class="st">'place'</span>], <span class="st">'-'</span>, movie[<span class="st">'movie_title'</span>], <span class="st">'('</span><span class="op">+</span>movie[<span class="st">'year'</span>] <span class="op">+</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">') -'</span>, <span class="st">'Starring:'</span>, movie[<span class="st">'star_cast'</span>], movie[<span class="st">'rating'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-5" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co">#saving the list as dataframe</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co">#then converting into .csv file</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(<span class="bu">list</span>)</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">'imdb_top_250_movies.csv'</span>,index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-6" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Downloading imdb top 250 movie's data</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'http://www.imdb.com/chart/top'</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url)</span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.text, <span class="st">"html.parser"</span>)</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>movies <span class="op">=</span> soup.select(<span class="st">'td.titleColumn'</span>)</span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>crew <span class="op">=</span> [a.attrs.get(<span class="st">'title'</span>) <span class="cf">for</span> a <span class="kw">in</span> soup.select(<span class="st">'td.titleColumn a'</span>)]</span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>ratings <span class="op">=</span> [b.attrs.get(<span class="st">'data-value'</span>)</span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> b <span class="kw">in</span> soup.select(<span class="st">'td.posterColumn span[name=ir]'</span>)]</span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-19"><a href="#cb113-19" aria-hidden="true" tabindex="-1"></a><span class="co"># create a empty list for storing</span></span>
<span id="cb113-20"><a href="#cb113-20" aria-hidden="true" tabindex="-1"></a><span class="co"># movie information</span></span>
<span id="cb113-21"><a href="#cb113-21" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span> <span class="op">=</span> []</span>
<span id="cb113-22"><a href="#cb113-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-23"><a href="#cb113-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterating over movies to extract</span></span>
<span id="cb113-24"><a href="#cb113-24" aria-hidden="true" tabindex="-1"></a><span class="co"># each movie's details</span></span>
<span id="cb113-25"><a href="#cb113-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(movies)):</span>
<span id="cb113-26"><a href="#cb113-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb113-27"><a href="#cb113-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Separating movie into: 'place',</span></span>
<span id="cb113-28"><a href="#cb113-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 'title', 'year'</span></span>
<span id="cb113-29"><a href="#cb113-29" aria-hidden="true" tabindex="-1"></a>    movie_string <span class="op">=</span> movies[index].get_text()</span>
<span id="cb113-30"><a href="#cb113-30" aria-hidden="true" tabindex="-1"></a>    movie <span class="op">=</span> (<span class="st">' '</span>.join(movie_string.split()).replace(<span class="st">'.'</span>, <span class="st">''</span>))</span>
<span id="cb113-31"><a href="#cb113-31" aria-hidden="true" tabindex="-1"></a>    movie_title <span class="op">=</span> movie[<span class="bu">len</span>(<span class="bu">str</span>(index))<span class="op">+</span><span class="dv">1</span>:<span class="op">-</span><span class="dv">7</span>]</span>
<span id="cb113-32"><a href="#cb113-32" aria-hidden="true" tabindex="-1"></a>    year <span class="op">=</span> re.search(<span class="st">'\((.*?)\)'</span>, movie_string).group(<span class="dv">1</span>)</span>
<span id="cb113-33"><a href="#cb113-33" aria-hidden="true" tabindex="-1"></a>    place <span class="op">=</span> movie[:<span class="bu">len</span>(<span class="bu">str</span>(index))<span class="op">-</span>(<span class="bu">len</span>(movie))]</span>
<span id="cb113-34"><a href="#cb113-34" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> {<span class="st">"place"</span>: place,</span>
<span id="cb113-35"><a href="#cb113-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">"movie_title"</span>: movie_title,</span>
<span id="cb113-36"><a href="#cb113-36" aria-hidden="true" tabindex="-1"></a>            <span class="st">"rating"</span>: ratings[index],</span>
<span id="cb113-37"><a href="#cb113-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">"year"</span>: year,</span>
<span id="cb113-38"><a href="#cb113-38" aria-hidden="true" tabindex="-1"></a>            <span class="st">"star_cast"</span>: crew[index],</span>
<span id="cb113-39"><a href="#cb113-39" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb113-40"><a href="#cb113-40" aria-hidden="true" tabindex="-1"></a>    <span class="bu">list</span>.append(data)</span>
<span id="cb113-41"><a href="#cb113-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-42"><a href="#cb113-42" aria-hidden="true" tabindex="-1"></a><span class="co"># printing movie details with its rating.</span></span>
<span id="cb113-43"><a href="#cb113-43" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> movie <span class="kw">in</span> <span class="bu">list</span>:</span>
<span id="cb113-44"><a href="#cb113-44" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(movie[<span class="st">'place'</span>], <span class="st">'-'</span>, movie[<span class="st">'movie_title'</span>], <span class="st">'('</span><span class="op">+</span>movie[<span class="st">'year'</span>] <span class="op">+</span></span>
<span id="cb113-45"><a href="#cb113-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">') -'</span>, <span class="st">'Starring:'</span>, movie[<span class="st">'star_cast'</span>], movie[<span class="st">'rating'</span>])</span>
<span id="cb113-46"><a href="#cb113-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-47"><a href="#cb113-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-48"><a href="#cb113-48" aria-hidden="true" tabindex="-1"></a><span class="co">##.......##</span></span>
<span id="cb113-49"><a href="#cb113-49" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(<span class="bu">list</span>)</span>
<span id="cb113-50"><a href="#cb113-50" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">'imdb_top_250_movies.csv'</span>,index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<a class="quarto-notebook-link" id="nblink-6" href="labs/Practice/Practice3-scrape-imdb-movie-rating-and-details-preview.html#cell-0">Source: Downloading imdb top 250 movie's data</a></div>
</section>
<section id="practice4-imdb-and-douban-top-250-movie-datasets" class="level1">
<h1>Practice4-IMDb-and-Douban-top-250-movie-datasets</h1>
<div class="quarto-embed-nb-cell">
<div id="cell-0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-1" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>imdb_data <span class="op">=</span> pd.read_csv(<span class="st">'IMDB_Top250.csv'</span>)  <span class="co"># Replace with actual file path</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>douban_data <span class="op">=</span> pd.read_csv(<span class="st">'douban_top250.csv'</span>)  <span class="co"># Replace with actual file path</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-2" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> urllib.request, urllib.error  <span class="co"># for URL requests</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv  <span class="co"># for saving as CSV</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-3" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Regular expressions to extract information</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>findLink <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'&lt;a href="(.*?)"&gt;'</span>)  <span class="co"># detail link</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>findImgSrc <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'&lt;img.*src="(.*?)"'</span>, re.S)  <span class="co"># image link</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>findTitle <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'&lt;span class="title"&gt;(.*)&lt;/span&gt;'</span>)  <span class="co"># movie title</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>findRating <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'&lt;span class="rating_num" property="v:average"&gt;(.*)&lt;/span&gt;'</span>)  <span class="co"># rating</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>findJudge <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'&lt;span&gt;(\d*)人评价&lt;/span&gt;'</span>)  <span class="co"># number of reviews</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>findInq <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'&lt;span class="inq"&gt;(.*)&lt;/span&gt;'</span>)  <span class="co"># summary</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>findBd <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'&lt;p class=""&gt;(.*?)&lt;/p&gt;'</span>, re.S)  <span class="co"># additional info</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-4" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load datasets</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>douban_file_path <span class="op">=</span> <span class="st">'douban_top250.csv'</span>  </span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>imdb_file_path <span class="op">=</span> <span class="st">'IMDB_Top250.csv'</span>      </span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>douban_data <span class="op">=</span> pd.read_csv(douban_file_path, encoding<span class="op">=</span><span class="st">'utf-8'</span>, on_bad_lines<span class="op">=</span><span class="st">'skip'</span>)</span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>imdb_data <span class="op">=</span> pd.read_csv(imdb_file_path, encoding<span class="op">=</span><span class="st">'utf-8'</span>, on_bad_lines<span class="op">=</span><span class="st">'skip'</span>)</span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Renaming columns for clarity and merging compatibility</span></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a>douban_data.rename(columns<span class="op">=</span>{</span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'影片中文名'</span>: <span class="st">'Title'</span>,</span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'评分'</span>: <span class="st">'Douban_Score'</span>,</span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'评价数'</span>: <span class="st">'Douban_Reviews'</span>,</span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'相关信息'</span>: <span class="st">'Douban_Info'</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a>}, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-5" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>imdb_data.rename(columns<span class="op">=</span>{</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Name'</span>: <span class="st">'Title'</span>,</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Year'</span>: <span class="st">'Release_Year'</span>,</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'IMDB Ranking'</span>: <span class="st">'IMDB_Score'</span>,</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Genre'</span>: <span class="st">'IMDB_Genre'</span>,</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Director'</span>: <span class="st">'IMDB_Director'</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>}, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-6" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average scores for both platforms</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>douban_avg_score <span class="op">=</span> douban_data[<span class="st">'Douban_Score'</span>].mean()</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>imdb_avg_score <span class="op">=</span> imdb_data[<span class="st">'IMDB_Score'</span>].mean()</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Find overlapping movies by title</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>overlap_movies <span class="op">=</span> pd.merge(douban_data, imdb_data, on<span class="op">=</span><span class="st">'Title'</span>)</span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize average scores</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>plt.bar([<span class="st">'Douban'</span>, <span class="st">'IMDb'</span>], [douban_avg_score, imdb_avg_score], alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Scores: Douban vs IMDb'</span>)</span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Average Score'</span>)</span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze release year distribution</span></span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a>douban_data[<span class="st">'Douban_Info'</span>] <span class="op">=</span> douban_data[<span class="st">'Douban_Info'</span>].astype(<span class="bu">str</span>)</span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a>douban_years <span class="op">=</span> douban_data[<span class="st">'Douban_Info'</span>].<span class="bu">str</span>.extract(<span class="vs">r'(\d</span><span class="sc">{4}</span><span class="vs">)'</span>).dropna()</span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a>douban_years <span class="op">=</span> douban_years[<span class="dv">0</span>].astype(<span class="bu">int</span>).value_counts().sort_index()</span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a>imdb_years <span class="op">=</span> imdb_data[<span class="st">'Release_Year'</span>].value_counts().sort_index()</span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-23"><a href="#cb120-23" aria-hidden="true" tabindex="-1"></a>douban_years.plot(kind<span class="op">=</span><span class="st">'bar'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'Douban'</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb120-24"><a href="#cb120-24" aria-hidden="true" tabindex="-1"></a>imdb_years.plot(kind<span class="op">=</span><span class="st">'bar'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'IMDb'</span>, color<span class="op">=</span><span class="st">'orange'</span>)</span>
<span id="cb120-25"><a href="#cb120-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Release Year Distribution'</span>)</span>
<span id="cb120-26"><a href="#cb120-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb120-27"><a href="#cb120-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Number of Movies'</span>)</span>
<span id="cb120-28"><a href="#cb120-28" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb120-29"><a href="#cb120-29" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice4-IMDb-and-Douban-top-250-movie-datasets-cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice4-IMDb-and-Douban-top-250-movie-datasets-cell-8-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-7" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze genre distribution</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>imdb_genres <span class="op">=</span> imdb_data[<span class="st">'IMDB_Genre'</span>].<span class="bu">str</span>.split(<span class="st">','</span>).explode().<span class="bu">str</span>.strip().value_counts()</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>imdb_genres.head(<span class="dv">10</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, color<span class="op">=</span><span class="st">'orange'</span>)</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Top 10 IMDb Genres'</span>)</span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Genre'</span>)</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Count'</span>)</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Top directors by movie count</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>douban_directors <span class="op">=</span> douban_data[<span class="st">'Douban_Info'</span>].<span class="bu">str</span>.extract(<span class="vs">r'导演: (.+?) '</span>).dropna()</span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>douban_top_directors <span class="op">=</span> douban_directors[<span class="dv">0</span>].value_counts().head(<span class="dv">10</span>)</span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>imdb_top_directors <span class="op">=</span> imdb_data[<span class="st">'IMDB_Director'</span>].value_counts().head(<span class="dv">10</span>)</span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a>douban_top_directors.plot(kind<span class="op">=</span><span class="st">'bar'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'Douban'</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Top 10 Douban Directors'</span>)</span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Director'</span>)</span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Movie Count'</span>)</span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb121-22"><a href="#cb121-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-23"><a href="#cb121-23" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb121-24"><a href="#cb121-24" aria-hidden="true" tabindex="-1"></a>imdb_top_directors.plot(kind<span class="op">=</span><span class="st">'bar'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'IMDb'</span>, color<span class="op">=</span><span class="st">'orange'</span>)</span>
<span id="cb121-25"><a href="#cb121-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Top 10 IMDb Directors'</span>)</span>
<span id="cb121-26"><a href="#cb121-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Director'</span>)</span>
<span id="cb121-27"><a href="#cb121-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Movie Count'</span>)</span>
<span id="cb121-28"><a href="#cb121-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb121-29"><a href="#cb121-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-30"><a href="#cb121-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Save overlapping movies to a CSV file</span></span>
<span id="cb121-31"><a href="#cb121-31" aria-hidden="true" tabindex="-1"></a>overlap_movies.to_csv(<span class="st">'overlap_movies.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb121-32"><a href="#cb121-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-33"><a href="#cb121-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb121-34"><a href="#cb121-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"豆瓣平均评分: </span><span class="sc">{</span>douban_avg_score<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb121-35"><a href="#cb121-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"IMDb平均评分: </span><span class="sc">{</span>imdb_avg_score<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb121-36"><a href="#cb121-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"重叠电影数量: </span><span class="sc">{</span><span class="bu">len</span>(overlap_movies)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice4-IMDb-and-Douban-top-250-movie-datasets-cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice4-IMDb-and-Douban-top-250-movie-datasets-cell-9-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="practice_files/figure-html/labs-Practice-Practice4-IMDb-and-Douban-top-250-movie-datasets-cell-9-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>豆瓣平均评分: 8.9396
IMDb平均评分: 8.254
重叠电影数量: 0</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-7" href="labs/Practice/Practice4-IMDb-and-Douban-top-250-movie-datasets-preview.html#cell-0">Source: Regular expressions to extract information</a></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>